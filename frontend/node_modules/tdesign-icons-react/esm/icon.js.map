{"version":3,"file":"icon.js","sources":["../src/icon.tsx"],"sourcesContent":["import classNames from 'classnames';\nimport {\n  createElement,\n  ReactElement,\n  SVGAttributes,\n  CSSProperties,\n  forwardRef,\n  Ref,\n  useEffect,\n} from 'react';\nimport useSizeProps from './util/use-size-props';\nimport { loadStylesheet } from './util/check-url-and-load';\n\nexport interface IconProps extends SVGAttributes<SVGSVGElement> {\n  style?: CSSProperties;\n  className?: string;\n  size?: 'small' | 'medium' | 'large' | string | number;\n}\nexport interface Attrs {\n  [key: string]: any;\n}\nexport interface IconElement {\n  tag: string;\n  attrs: Attrs;\n  children?: IconElement[];\n}\nexport interface IconFulfilledProps extends IconProps {\n  icon: IconElement;\n  id: string;\n}\n\n/**\n * use react createElement to render an IconElement with other props\n */\nfunction render(node: IconElement, id: string, rootProps?: { [key: string]: any }): ReactElement {\n  return createElement(\n    node.tag,\n    {\n      key: id,\n      ...node.attrs,\n      ...rootProps,\n    },\n    (node.children || []).map((child, index) => render(child, `${id}-${node.tag}-${index}`)),\n  );\n}\n\nexport const IconBase = forwardRef((props: IconFulfilledProps, ref: Ref<SVGElement>) => {\n  const {\n    icon, id, className, size, style, ...restProps\n  } = props;\n  const { className: sizeClassName, style: sizeStyle } = useSizeProps(size);\n  const cls = classNames('t-icon', `t-icon-${id}`, className, sizeClassName);\n\n  useEffect(() => {\n    loadStylesheet();\n  }, []);\n\n  return render(icon, `${id}`, {\n    ref,\n    className: cls,\n    style: { ...style, ...sizeStyle },\n    ...restProps,\n  });\n});\n"],"names":["node","id","rootProps","createElement","tag","key","attrs","children","map","child","index","render","IconBase","forwardRef","props","ref","icon","className","size","style","restProps","useSizeProps","sizeClassName","sizeStyle","cls","classNames"],"mappings":";;;;;;;;;;;AAkCA,gBAAgBA,MAAmBC,IAAYC,WAAkD;sBACxFC,cACLH,KAAKI;IAEHC,KAAKJ;KACFD,KAAKM,QACLJ,YAEJ,MAAKK,YAAY,IAAIC,IAAI,UAACC,OAAOC;WAAUC,OAAOF,iBAAUR,gBAAMD,KAAKI,iBAAOM;;AAAA;IAItEE,wBAAWC,WAAW,UAACC,OAA2BC,KAAyB;MAEpFC,OACEF,MADFE;IAAMf,KACJa,MADIb;IAAIgB,YACRH,MADQG;IAAWC,OACnBJ,MADmBI;IAAMC,QACzBL,MADyBK;IAAUC,qCACnCN;sBACmDO,aAAaH;IAAjDI,8BAAXL;IAAiCM,0BAAPJ;MAC5BK,MAAMC,WAAW,2BAAoBxB,KAAMgB,WAAWK;YAElD,YAAM;;KAEb;SAEIX,OAAOK,gBAASf;IACrBc,KAAAA;IACAE,WAAWO;IACXL,uCAAYA,QAAUI;KACnBH;AAAA;;;;"}
{"version":3,"file":"Button.js","sources":["../../../components/button/Button.tsx"],"sourcesContent":["import React, { forwardRef, useMemo } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../hooks/useConfig';\nimport useDomRefCallback from '../hooks/useDomRefCallback';\nimport useRipple from '../hooks/useRipple';\nimport Loading from '../loading';\nimport { TdButtonProps } from './type';\nimport { buttonDefaultProps } from './defaultProps';\nimport parseTNode from '../_util/parseTNode';\nimport useDefaultProps from '../hooks/useDefaultProps';\n\nexport interface ButtonProps\n  extends TdButtonProps,\n    Omit<React.AllHTMLAttributes<HTMLElement>, 'content' | 'shape' | 'size' | 'type'> {}\n\nconst Button = forwardRef((originProps: ButtonProps, ref: React.RefObject<HTMLElement>) => {\n  const props = useDefaultProps(originProps, buttonDefaultProps);\n  const {\n    type,\n    theme,\n    variant,\n    icon,\n    disabled,\n    loading,\n    size,\n    block,\n    ghost,\n    shape,\n    children,\n    content,\n    className,\n    suffix,\n    href,\n    tag,\n    onClick,\n    ...buttonProps\n  } = props;\n\n  const { classPrefix } = useConfig();\n\n  const [btnDom, setRefCurrent] = useDomRefCallback();\n  useRipple(ref?.current || btnDom);\n\n  const renderChildren = content ?? children;\n\n  let iconNode = icon;\n  if (loading) iconNode = <Loading loading={loading} inheritColor={true} />;\n\n  const renderTheme = useMemo(() => {\n    if (!theme) {\n      if (variant === 'base') return 'primary';\n      return 'default';\n    }\n    return theme;\n  }, [theme, variant]);\n\n  const renderTag = useMemo(() => {\n    if (!tag && href && !disabled) return 'a';\n    if (!tag && disabled) return 'div';\n    return tag || 'button';\n  }, [tag, href, disabled]);\n\n  return React.createElement(\n    renderTag,\n    {\n      ...buttonProps,\n      href,\n      type,\n      ref: ref || setRefCurrent,\n      disabled: disabled || loading,\n      className: classNames(\n        className,\n        [\n          `${classPrefix}-button`,\n          `${classPrefix}-button--theme-${renderTheme}`,\n          `${classPrefix}-button--variant-${variant}`,\n        ],\n        {\n          [`${classPrefix}-button--shape-${shape}`]: shape !== 'rectangle',\n          [`${classPrefix}-button--ghost`]: ghost,\n          [`${classPrefix}-is-loading`]: loading,\n          [`${classPrefix}-is-disabled`]: disabled,\n          [`${classPrefix}-size-s`]: size === 'small',\n          [`${classPrefix}-size-l`]: size === 'large',\n          [`${classPrefix}-size-full-width`]: block,\n        },\n      ),\n      onClick: !disabled && !loading ? onClick : undefined,\n    },\n    <>\n      {iconNode}\n      {renderChildren && <span className={`${classPrefix}-button__text`}>{renderChildren}</span>}\n      {suffix && <span className={`${classPrefix}-button__suffix`}>{parseTNode(suffix)}</span>}\n    </>,\n  );\n});\n\nButton.displayName = 'Button';\n\nexport default Button;\n"],"names":["Button","forwardRef","originProps","ref","props","useDefaultProps","buttonDefaultProps","type","theme","variant","icon","disabled","loading","size","block","ghost","shape","children","content","className","suffix","href","tag","onClick","buttonProps","_objectWithoutProperties","_excluded","_useConfig","useConfig","classPrefix","_useDomRefCallback","useDomRefCallback","_useDomRefCallback2","_slicedToArray","btnDom","setRefCurrent","useRipple","current","renderChildren","iconNode","React","createElement","Loading","inheritColor","renderTheme","useMemo","renderTag","_objectSpread","classNames","concat","_defineProperty","Fragment","parseTNode","displayName"],"mappings":"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"}
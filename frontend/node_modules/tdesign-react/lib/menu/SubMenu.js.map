{"version":3,"file":"SubMenu.js","sources":["../../../components/menu/SubMenu.tsx"],"sourcesContent":["import React, { FC, useContext, useState, ReactElement, useMemo, useRef } from 'react';\nimport classNames from 'classnames';\nimport { CSSTransition } from 'react-transition-group';\nimport { StyledProps } from '../common';\nimport type { TdSubmenuProps } from './type';\nimport useConfig from '../hooks/useConfig';\nimport { MenuContext } from './MenuContext';\nimport useDomRefCallback from '../hooks/useDomRefCallback';\nimport useRipple from '../hooks/useRipple';\nimport { getSubMenuMaxHeight } from './_util/getSubMenuChildStyle';\nimport checkSubMenuChildrenActive from './_util/checkSubMenuChildrenActive';\nimport FakeArrow from '../common/FakeArrow';\nimport { checkIsSubMenu, checkIsMenuGroup } from './_util/checkMenuType';\nimport { cacularPaddingLeft } from './_util/cacularPaddingLeft';\nimport { Popup, PopupPlacement } from '../popup';\nimport parseTNode from '../_util/parseTNode';\n\nexport interface SubMenuProps extends TdSubmenuProps, StyledProps {}\n\nexport interface SubMenuWithCustomizeProps extends SubMenuProps {\n  level?: number;\n}\n\nconst SubAccordion: FC<SubMenuWithCustomizeProps> = (props) => {\n  const { content, children = content, disabled, icon, title, value, className, style, level = 1, popupProps } = props;\n  const { overlayClassName, overlayInnerClassName, ...restPopupProps } = popupProps || {};\n\n  const { classPrefix } = useConfig();\n\n  // popup 状态下控制开关\n  const [open, setOpen] = useState(false);\n  const { expanded = [], onExpand, active, expandType, theme = 'light' } = useContext(MenuContext);\n\n  const isPopUp = expandType === 'popup';\n\n  // 非 popup 展开\n  const isExpand = expanded.includes(value) && !disabled && !isPopUp;\n\n  const handleClick = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    e.stopPropagation();\n    onExpand(value, expanded);\n    setOpen(false);\n  };\n\n  const handleVisibleChange = (visible: boolean) => {\n    setOpen(visible);\n  };\n\n  const popupChildren = React.Children.map(children, (child) =>\n    React.cloneElement(child as ReactElement<any>, {\n      className: classNames(\n        `${classPrefix}-menu__item--plain`,\n        `${classPrefix}-submenu__item`,\n        `${classPrefix}-submenu__item--icon`,\n        (child as ReactElement<any>).props?.className,\n      ),\n    }),\n  );\n\n  // 计算有多少子节点并设置最大高度，为做出动画效果\n  const childStyle = {\n    maxHeight: isExpand || (open && isPopUp) ? getSubMenuMaxHeight(children) : 0,\n  };\n\n  // 是否展开（popup 与 expand 两种状态）\n  const isOpen = useMemo(() => {\n    if (disabled) return false;\n    if (isPopUp) return open;\n    return isExpand;\n  }, [disabled, isPopUp, open, isExpand]);\n\n  // 计算左边距，兼容多层级子菜单\n  const menuPaddingLeft = cacularPaddingLeft(level - 1);\n\n  const fakeArrowStyle = isPopUp && level > 1 ? { transform: 'rotate(-90deg)' } : {};\n\n  const contentRef = useRef<HTMLUListElement>(null);\n\n  const transitionCallbacks = {\n    onEnter: () => {\n      contentRef.current.style.height = `${contentRef?.current.scrollHeight}px`;\n    },\n    onEntered: () => {\n      contentRef.current.style.height = 'auto';\n    },\n    onExit: () => {\n      contentRef.current.style.height = `${contentRef?.current.scrollHeight}px`;\n    },\n    onExiting: () => {\n      contentRef.current.style.height = '0px';\n    },\n  };\n\n  const pupContent = (\n    <ul\n      className={classNames(`${classPrefix}-menu__popup-wrapper`, {\n        [`${classPrefix}-is-opened`]: isOpen,\n      })}\n      key=\"popup\"\n      style={childStyle}\n    >\n      {popupChildren}\n    </ul>\n  );\n\n  const submenu = (\n    <li\n      className={classNames(`${classPrefix}-submenu`, className, {\n        [`${classPrefix}-is-disabled`]: disabled,\n        [`${classPrefix}-is-opened`]: isOpen,\n      })}\n      style={style}\n    >\n      <div\n        className={classNames(`${classPrefix}-menu__item`, {\n          [`${classPrefix}-is-opened`]: isOpen,\n          [`${classPrefix}-is-active`]: checkSubMenuChildrenActive(children, active),\n        })}\n        onClick={handleClick}\n      >\n        {parseTNode(icon)}\n        <span className={`${classPrefix}-menu__content`}>{title}</span>\n        <FakeArrow style={fakeArrowStyle} isActive={isOpen} disabled={disabled} />\n      </div>\n      {!isPopUp && (\n        <CSSTransition in={isOpen} appear timeout={300} nodeRef={contentRef} {...transitionCallbacks}>\n          <ul\n            key=\"normal\"\n            style={\n              {\n                ...childStyle,\n                '--padding-left': `${menuPaddingLeft}px`,\n                overflow: 'hidden',\n              } as React.CSSProperties\n            }\n            className={classNames(`${classPrefix}-menu__sub`, `${classPrefix}-slide-down-enter-active`)}\n            ref={contentRef}\n          >\n            {popupChildren}\n          </ul>\n        </CSSTransition>\n      )}\n    </li>\n  );\n\n  if (isPopUp) {\n    return (\n      <Popup\n        {...restPopupProps}\n        overlayInnerClassName={[\n          `${classPrefix}-menu__popup`,\n          `${classPrefix}-is-vertical`,\n          {\n            [`${classPrefix}-is-opened`]: isOpen,\n          },\n          overlayInnerClassName,\n        ]}\n        overlayClassName={[\n          `${classPrefix}-menu--${theme}`,\n          { [`${classPrefix}-menu-is-nested`]: level > 1 },\n          overlayClassName,\n        ]}\n        visible={open}\n        placement=\"right-top\"\n        content={pupContent}\n        onVisibleChange={handleVisibleChange}\n      >\n        {submenu}\n      </Popup>\n    );\n  }\n\n  return submenu;\n};\n\nconst SubTitleMenu: FC<SubMenuWithCustomizeProps> = (props) => {\n  const { className, style, children, disabled, icon, title, value, level = 1, popupProps } = props;\n\n  const { overlayClassName, overlayInnerClassName, ...restPopupProps } = popupProps || {};\n\n  const { active, onChange, expandType, theme = 'light' } = useContext(MenuContext);\n  const { classPrefix } = useConfig();\n  const [open, setOpen] = useState(false);\n\n  const handleClick = () => onChange(value);\n\n  const handleVisibleChange = (visible: boolean) => {\n    setOpen(visible);\n  };\n\n  // 斜八角动画\n  const [subMenuDom, setRefCurrent] = useDomRefCallback();\n\n  useRipple(subMenuDom);\n\n  // pupup 导航\n  const isPopUp = expandType === 'popup';\n  // 当前二级导航激活\n  const isActive = checkSubMenuChildrenActive(children, active) || active === value;\n\n  // 是否展开（popup 与 expand 两种状态）\n  const isOpen = useMemo(() => {\n    if (disabled) return false;\n    if (isPopUp) return open;\n    return false;\n  }, [disabled, isPopUp, open]);\n\n  const fakeArrowStyle = level > 1 ? { transform: 'rotate(-90deg)' } : {};\n\n  const pupContent = (\n    <ul\n      className={classNames(`${classPrefix}-menu__popup-wrapper`, {\n        [`${classPrefix}-is-opened`]: isOpen,\n      })}\n    >\n      {children}\n    </ul>\n  );\n\n  let placement = 'right-top';\n  if (level < 2) {\n    placement = 'bottom-left';\n  }\n\n  const submenu = (\n    <li\n      className={classNames(`${classPrefix}-submenu`, className, {\n        [`${classPrefix}-is-opened`]: open,\n      })}\n    >\n      <div\n        ref={setRefCurrent}\n        className={classNames(`${classPrefix}-menu__item`, {\n          [`${classPrefix}-is-active`]: isActive,\n          [`${classPrefix}-is-opened`]: open,\n        })}\n        onClick={handleClick}\n        style={style}\n      >\n        {parseTNode(icon)}\n        <span>{title}</span>\n        {isPopUp && <FakeArrow style={fakeArrowStyle} isActive={level === 1 && open} />}\n      </div>\n    </li>\n  );\n\n  if (isPopUp) {\n    return (\n      <Popup\n        {...restPopupProps}\n        overlayInnerClassName={[\n          `${classPrefix}-menu__popup`,\n          `${classPrefix}-is-vertical`,\n          {\n            [`${classPrefix}-is-opened`]: isOpen,\n          },\n          overlayInnerClassName,\n        ]}\n        overlayClassName={[\n          `${classPrefix}-menu--${theme}`,\n          `${classPrefix}-is-head-menu`,\n          { [`${classPrefix}-menu-is-nested`]: level > 1 },\n          overlayClassName,\n        ]}\n        visible={open}\n        placement={placement as PopupPlacement}\n        content={pupContent}\n        onVisibleChange={handleVisibleChange}\n      >\n        {submenu}\n      </Popup>\n    );\n  }\n\n  return submenu;\n};\n\nconst SubMenu: FC<SubMenuWithCustomizeProps> = (props) => {\n  const { mode } = useContext(MenuContext);\n  const { children, level = 1 } = props;\n\n  const changeItemLevel = (item: React.ReactElement<any>) => {\n    if (checkIsSubMenu(item)) {\n      return React.cloneElement(item, {\n        level: level + 1,\n      });\n    }\n    if (checkIsMenuGroup(item)) {\n      const groupChildren = React.Children.map(item.props.children, (item: React.ReactElement) =>\n        changeItemLevel(item),\n      );\n      return React.cloneElement(\n        item,\n        {\n          level: level + 1,\n        },\n        groupChildren,\n      );\n    }\n    return item;\n  };\n\n  // 如果是第二层及以及的 subMenu 需要添加 notFirstLevelSubMenu 属性\n  const childElement = React.Children.map(children, (item: React.ReactElement) => changeItemLevel(item));\n\n  if (mode === 'accordion') return <SubAccordion {...props}>{childElement}</SubAccordion>;\n  if (mode === 'title') return <SubTitleMenu {...props}>{childElement}</SubTitleMenu>;\n  return null;\n};\n\nSubMenu.displayName = 'SubMenu';\n\nexport default SubMenu;\n"],"names":["SubAccordion","props","content","_props$children","children","disabled","icon","title","value","className","style","_props$level","level","popupProps","_ref","overlayClassName","overlayInnerClassName","restPopupProps","_objectWithoutProperties","_excluded","_useConfig","useConfig","classPrefix","_useState","useState","_useState2","_slicedToArray","open","setOpen","_useContext","useContext","MenuContext","_useContext$expanded","expanded","onExpand","active","expandType","_useContext$theme","theme","isPopUp","isExpand","includes","handleClick","e","stopPropagation","handleVisibleChange","visible","popupChildren","React","Children","map","child","_child$props","cloneElement","classNames","concat","childStyle","maxHeight","getSubMenuMaxHeight","isOpen","useMemo","menuPaddingLeft","cacularPaddingLeft","fakeArrowStyle","transform","contentRef","useRef","transitionCallbacks","onEnter","current","height","scrollHeight","onEntered","onExit","onExiting","pupContent","createElement","_defineProperty","key","submenu","checkSubMenuChildrenActive","onClick","parseTNode","FakeArrow","isActive","CSSTransition","_objectSpread","appear","timeout","nodeRef","overflow","ref","Popup","placement","onVisibleChange","SubTitleMenu","_props$level2","_ref4","_excluded2","_useContext2","onChange","_useContext2$theme","_useConfig2","_useState3","_useState4","_useDomRefCallback","useDomRefCallback","_useDomRefCallback2","subMenuDom","setRefCurrent","useRipple","SubMenu","_useContext3","mode","_props$level3","changeItemLevel","item","checkIsSubMenu","checkIsMenuGroup","groupChildren","childElement","displayName"],"mappings":"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"}
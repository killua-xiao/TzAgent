{"version":3,"file":"utils.js","sources":["../../../components/date-picker/utils.ts"],"sourcesContent":["import { isNil } from 'lodash-es';\nimport { parseToDayjs } from '@tdesign/common-js/date-picker/format';\n\n// 用于头部日期切换修正\nexport function dateCorrection(partialIndex: number, preYear: Array<number>, preMonth: Array<number>, onlyYearSelect) {\n  let nextYear = preYear;\n  const nextMonth = preMonth;\n  if (partialIndex === 0) {\n    if (nextYear[1] <= nextYear[0]) {\n      if (onlyYearSelect) nextYear[1] = nextYear[0] + 1;\n      else {\n        // eslint-disable-next-line prefer-destructuring\n        nextYear[1] = nextYear[0];\n        if (nextMonth[1] <= nextMonth[0]) {\n          nextMonth[1] = nextMonth[0] + 1;\n          if (nextMonth[1] === 12) {\n            // 处理跨年的边界场景\n            nextMonth[1] = 0;\n            nextYear = [nextYear[0], nextYear[1] + 1];\n          }\n        }\n      }\n    }\n  }\n\n  // 保证左侧时间不大于右侧\n  if (partialIndex === 1) {\n    if (nextYear[0] >= nextYear[1]) {\n      // 年/季度/月份场景下，头部只有年选择器，直接 - 1\n      if (onlyYearSelect) nextYear[0] = nextYear[1] - 1;\n      else {\n        // eslint-disable-next-line prefer-destructuring\n        nextYear[0] = nextYear[1];\n        if (nextMonth[0] >= nextMonth[1]) {\n          nextMonth[0] = nextMonth[1] - 1;\n          if (nextMonth[0] === -1) {\n            // 处理跨年的边界场景\n            nextMonth[0] = 11;\n            nextYear = [nextYear[0] - 1, nextYear[1]];\n          }\n        }\n      }\n    }\n  }\n  return { nextYear, nextMonth };\n}\n\nexport function parseToDateTime(\n  value: string | Date | number,\n  format: string,\n  times?: [number, number, number, number?],\n) {\n  if (isNil(value)) {\n    return null;\n  }\n\n  let dayjs = parseToDayjs(value, format);\n\n  if (times) {\n    const [hour = 0, minute = 0, second = 0, millisecond = 0] = times;\n    dayjs = dayjs.hour(hour).minute(minute).second(second).millisecond(millisecond);\n  }\n\n  return dayjs.toDate();\n}\n"],"names":["dateCorrection","partialIndex","preYear","preMonth","onlyYearSelect","nextYear","nextMonth","parseToDateTime","value","format","times","isNil","dayjs","parseToDayjs","_times","_slicedToArray","_times$","hour","_times$2","minute","second","_times$3","_times$4","millisecond","toDate"],"mappings":"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"}
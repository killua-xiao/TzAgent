{"version":3,"file":"SorterButton.js","sources":["../../../components/table/SorterButton.tsx"],"sourcesContent":["import React, { MouseEvent } from 'react';\nimport { ChevronDownIcon as TdChevronDownIcon } from 'tdesign-icons-react';\nimport classNames from 'classnames';\nimport useGlobalIcon from '../hooks/useGlobalIcon';\nimport useClassName from './hooks/useClassName';\nimport { SortType } from './type';\nimport Tooltip, { TooltipProps } from '../tooltip';\nimport { TNode } from '../common';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\n\ntype SortTypeEnums = Array<'desc' | 'asc'>;\n\nexport interface SorterButtonProps {\n  sortType: SortType;\n  sortOrder: string;\n  sortIcon: TNode;\n  tooltipProps?: TooltipProps;\n  hideSortTips?: boolean;\n  onSortIconClick: (e: MouseEvent<HTMLSpanElement>, p: { descending: boolean }) => void;\n}\n\nexport default function SorterButton(props: SorterButtonProps) {\n  const { sortType = 'all' } = props;\n  const { ChevronDownIcon } = useGlobalIcon({\n    ChevronDownIcon: TdChevronDownIcon,\n  });\n  const { tableSortClasses, negativeRotate180 } = useClassName();\n  const [locale, t] = useLocaleReceiver('table');\n\n  const allowSortTypes: SortTypeEnums = sortType === 'all' ? ['asc', 'desc'] : [sortType];\n\n  const onSortIconClick = (e: MouseEvent<HTMLSpanElement>, direction: string) => {\n    props?.onSortIconClick(e, { descending: direction === 'desc' });\n  };\n\n  function getSortIcon(direction: string, activeClass: string) {\n    const defaultIcon = t(locale.sortIcon) || <ChevronDownIcon />;\n    const icon = props.sortIcon || defaultIcon;\n    const sortClassName = [\n      activeClass,\n      tableSortClasses.sortIcon,\n      tableSortClasses.iconDirection[direction],\n      { [negativeRotate180]: direction === 'asc' },\n    ];\n    return (\n      <span\n        key={direction}\n        className={classNames(sortClassName)}\n        onClick={(e: MouseEvent<HTMLSpanElement>) => onSortIconClick(e, direction)}\n      >\n        {icon}\n      </span>\n    );\n  }\n\n  const classes = [tableSortClasses.trigger, { [tableSortClasses.doubleIcon]: allowSortTypes.length > 1 }];\n  const tooltips = {\n    asc: locale.sortAscendingOperationText,\n    desc: locale.sortDescendingOperationText,\n  };\n  const sortButton = allowSortTypes.map((direction: string) => {\n    const activeClass = direction === props.sortOrder ? tableSortClasses.iconActive : tableSortClasses.iconDefault;\n    const cancelTips = locale.sortCancelOperationText;\n    const tips = direction === props.sortOrder ? cancelTips : tooltips[direction];\n    if (props.hideSortTips ?? locale.hideSortTips) return getSortIcon(direction, activeClass);\n    return (\n      <Tooltip content={tips} key={direction} placement=\"right\" {...props.tooltipProps} showArrow={false}>\n        {getSortIcon(direction, activeClass)}\n      </Tooltip>\n    );\n  });\n  return <div className={classNames(classes)}>{sortButton}</div>;\n}\n\nSorterButton.displayName = 'SorterButton';\n"],"names":["SorterButton","props","_props$sortType","sortType","_useGlobalIcon","useGlobalIcon","ChevronDownIcon","TdChevronDownIcon","_useClassName","useClassName","tableSortClasses","negativeRotate180","_useLocaleReceiver","useLocaleReceiver","_useLocaleReceiver2","_slicedToArray","locale","t","allowSortTypes","onSortIconClick","e","direction","descending","getSortIcon","activeClass","defaultIcon","sortIcon","icon","sortClassName","iconDirection","_defineProperty","React","createElement","key","className","classNames","onClick","classes","trigger","doubleIcon","length","tooltips","asc","sortAscendingOperationText","desc","sortDescendingOperationText","sortButton","map","_props$hideSortTips","sortOrder","iconActive","iconDefault","cancelTips","sortCancelOperationText","tips","hideSortTips","Tooltip","_objectSpread","content","placement","tooltipProps","showArrow","displayName"],"mappings":"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"}
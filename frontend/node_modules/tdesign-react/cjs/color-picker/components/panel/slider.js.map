{"version":3,"file":"slider.js","sources":["../../../../../components/color-picker/components/panel/slider.tsx"],"sourcesContent":["import React, { type CSSProperties, useEffect, useRef } from 'react';\nimport classnames from 'classnames';\nimport { SLIDER_DEFAULT_WIDTH } from '@tdesign/common-js/color-picker/constants';\nimport useMouseEvent, { type MouseCoordinate } from '../../../hooks/useMouseEvent';\nimport useStyles from '../../hooks/useStyles';\nimport type { TdColorBaseProps } from '../../interface';\n\nexport interface TdColorSliderProps extends TdColorBaseProps {\n  className?: string;\n  value?: Number;\n  maxValue?: Number;\n  railStyle?: CSSProperties;\n  type: 'hue' | 'alpha';\n}\n\nconst ColorSlider = (props: TdColorSliderProps) => {\n  const {\n    color,\n    className = '',\n    value = 0,\n    railStyle = {},\n    maxValue = 360,\n    baseClassName,\n    disabled,\n    onChange,\n    type,\n  } = props;\n  const panelRef = useRef<HTMLDivElement>(null);\n  const panelRectRef = useRef({\n    width: SLIDER_DEFAULT_WIDTH,\n  });\n  const { styles } = useStyles({ color, value, maxValue, type }, panelRectRef);\n\n  const handleDrag = (coordinate: MouseCoordinate) => {\n    if (disabled) return;\n    const { width } = panelRectRef.current;\n    const { x } = coordinate;\n    const value = Math.round((x / width) * Number(maxValue) * 100) / 100;\n    onChange(value);\n  };\n\n  useMouseEvent(panelRef, {\n    onDown: (_, ctx) => {\n      if (disabled) return;\n      // pop 模式下由于是隐藏显示，这个宽度让其每次点击的时候重新计算\n      panelRectRef.current.width = panelRef.current.offsetWidth;\n      handleDrag(ctx.coordinate);\n    },\n    onMove: (_, ctx) => {\n      handleDrag(ctx.coordinate);\n    },\n    onUp: (_, ctx) => {\n      handleDrag(ctx.coordinate);\n    },\n  });\n\n  useEffect(() => {\n    panelRectRef.current.width = panelRef.current.offsetWidth || SLIDER_DEFAULT_WIDTH;\n  }, []);\n\n  const paddingStyle = {\n    background: `linear-gradient(90deg, rgba(0,0,0,.0) 0%, rgba(0,0,0,.0) 93%, ${props.color.rgb} 93%, ${props.color.rgb} 100%)`,\n  };\n\n  return (\n    <div className={classnames(`${baseClassName}__slider-wrapper`, `${baseClassName}__slider-wrapper--${type}-type`)}>\n      {type === 'alpha' && <div className={`${baseClassName}__slider-padding`} style={paddingStyle} />}\n      <div className={classnames(`${baseClassName}__slider`, className)} ref={panelRef}>\n        <div className={`${baseClassName}__rail`} style={railStyle}></div>\n        <span className={`${baseClassName}__thumb`} role=\"slider\" tabIndex={0} style={styles}></span>\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(ColorSlider);\n"],"names":["ColorSlider","props","color","_props$className","className","_props$value","value","_props$railStyle","railStyle","_props$maxValue","maxValue","baseClassName","disabled","onChange","type","panelRef","useRef","panelRectRef","width","SLIDER_DEFAULT_WIDTH","_useStyles","useStyles","styles","handleDrag","coordinate","current","x","Math","round","Number","useMouseEvent","onDown","_","ctx","offsetWidth","onMove","onUp","useEffect","paddingStyle","background","rgb","concat","React","createElement","classnames","style","ref","role","tabIndex","memo"],"mappings":"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"}
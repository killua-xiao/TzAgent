{"version":3,"file":"CustomFile.js","sources":["../../../../components/upload/themes/CustomFile.tsx"],"sourcesContent":["import React, { ReactNode } from 'react';\nimport useDrag, { UploadDragEvents } from '../hooks/useDrag';\nimport { CommonDisplayFileProps } from '../interface';\nimport { TdUploadProps } from '../type';\nimport parseTNode from '../../_util/parseTNode';\n\nexport interface CustomFileProps extends CommonDisplayFileProps {\n  dragEvents: UploadDragEvents;\n  draggable?: boolean;\n  // 拖拽区域\n  dragContent?: TdUploadProps['dragContent'];\n  trigger?: TdUploadProps['trigger'];\n  triggerUpload?: () => void;\n  // 非拖拽场景，是触发元素；拖拽场景是拖拽区域\n  childrenNode?: ReactNode;\n}\n\nconst CustomFile = (props: CustomFileProps) => {\n  const { classPrefix, displayFiles, accept } = props;\n  const drag = useDrag({ ...props.dragEvents, accept });\n  const { dragActive } = drag;\n\n  const dragEvents = props.draggable\n    ? {\n        onDrop: drag.handleDrop,\n        onDragEnter: drag.handleDragenter,\n        onDragOver: drag.handleDragover,\n        onDragLeave: drag.handleDragleave,\n      }\n    : {};\n\n  const renderDragContent = () => {\n    const childrenContent = parseTNode(props.childrenNode, { dragActive, files: displayFiles });\n    const triggerContent = parseTNode(props.trigger, { dragActive, files: displayFiles });\n    return (\n      <div\n        className={`${classPrefix}-upload__dragger ${classPrefix}-upload__dragger-center`}\n        {...dragEvents}\n        onClick={props.triggerUpload}\n      >\n        <div className={`${classPrefix}-upload__trigger`}>\n          {parseTNode(props.dragContent, { dragActive, files: displayFiles }) || triggerContent || childrenContent}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <>\n      {props.draggable ? (\n        renderDragContent()\n      ) : (\n        <div className={`${classPrefix}-upload__trigger`} onClick={props.triggerUpload}>\n          {props.childrenNode || props.children}\n        </div>\n      )}\n    </>\n  );\n};\n\nCustomFile.displayName = 'CustomFile';\n\nexport default CustomFile;\n"],"names":["CustomFile","props","classPrefix","displayFiles","accept","drag","useDrag","_objectSpread","dragEvents","dragActive","draggable","onDrop","handleDrop","onDragEnter","handleDragenter","onDragOver","handleDragover","onDragLeave","handleDragleave","renderDragContent","childrenContent","parseTNode","childrenNode","files","triggerContent","trigger","React","createElement","className","concat","onClick","triggerUpload","dragContent","Fragment","children","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiBA,IAAMA,UAAA,GAAa,SAAbA,UAAAA,CAAcC,KAA2B,EAAA;AAC7C,EAAA,IAAQC,WAAA,GAAsCD,KAAA,CAAtCC,WAAA;IAAaC,YAAc,GAAWF,KAAA,CAAzBE,YAAc;IAAAC,MAAA,GAAWH,KAAA,CAAXG,MAAA,CAAA;EACnC,IAAMC,OAAOC,+BAAQ,CAAAC,aAAA,CAAAA,aAAA,CAAA,EAAA,EAAKN,KAAM,CAAAO,UAAA,CAAA,EAAA,EAAA,EAAA;AAAYJ,IAAAA,QAAAA,MAAAA;IAAQ,CAAA,CAAA;AAC9C,EAAA,IAAEK,aAAeJ,IAAA,CAAfI;AAEF,EAAA,IAAAD,UAAA,GAAaP,MAAMS,SACrB,GAAA;IACEC,QAAQN,IAAK,CAAAO,UAAA;IACbC,aAAaR,IAAK,CAAAS,eAAA;IAClBC,YAAYV,IAAK,CAAAW,cAAA;IACjBC,aAAaZ,IAAK,CAAAa,eAAAA;MAEpB,EAAC,CAAA;AAEL,EAAA,IAAMC,oBAAoB,SAApBA,oBAA0B;AACxB,IAAA,IAAAC,eAAA,GAAkBC,4BAAWpB,KAAM,CAAAqB,YAAA,EAAc;AAAEb,MAAAA,UAAY,EAAZA,UAAY;AAAAc,MAAAA,KAAA,EAAOpB,YAAAA;AAAa,KAAC,CAAA,CAAA;AACpF,IAAA,IAAAqB,cAAA,GAAiBH,4BAAWpB,KAAM,CAAAwB,OAAA,EAAS;AAAEhB,MAAAA,UAAY,EAAZA,UAAY;AAAAc,MAAAA,KAAA,EAAOpB,YAAAA;AAAa,KAAC,CAAA,CAAA;IACpF,sBACGuB,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAApB,aAAA,CAAAA,aAAA,CAAA;AACCqB,MAAAA,SAAA,KAAAC,MAAA,CAAc3B,WAA+B,EAAA2B,mBAAAA,CAAAA,CAAAA,MAAA,CAAA3B,WAAA,EAAA,yBAAA,CAAA;AAAA,KAAA,EACzCM,UAAA,CAAA,EAAA,EAAA,EAAA;MACJsB,SAAS7B,KAAM,CAAA8B,aAAAA;AAAA,KAAA,CAAA,iBAEdL,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;MAAIC,qBAAc1B,WAAA,EAAA,kBAAA,CAAA;AAChB,KAAA,EAAAmB,2BAAA,CAAWpB,KAAM,CAAA+B,WAAA,EAAa;AAAEvB,MAAAA,UAAA,EAAAA,UAAA;AAAYc,MAAAA,KAAO,EAAApB,YAAAA;AAAa,KAAC,CAAA,IAAKqB,cAAkB,IAAAJ,eAC3F,CACF,CAAA,CAAA;GAEJ,CAAA;EAEA,sBAEKM,yBAAA,CAAAC,aAAA,CAAAD,yBAAA,CAAAO,QAAA,EAAA,IAAA,EAAAhC,KAAA,CAAMS,SACL,GAAAS,iBAAA,oBAECO,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAIC,IAAAA,qBAAc1B,WAAA,EAAA,kBAAA,CAAA;IAA+B4B,SAAS7B,KAAM,CAAA8B,aAAAA;GAAA,EAC9D9B,KAAM,CAAAqB,YAAA,IAAgBrB,KAAM,CAAAiC,QAC/B,CAEJ,CAAA,CAAA;AAEJ,EAAA;AAEAlC,UAAA,CAAWmC,WAAc,GAAA,YAAA;;;;"}
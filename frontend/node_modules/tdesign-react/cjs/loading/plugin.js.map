{"version":3,"file":"plugin.js","sources":["../../../components/loading/plugin.tsx"],"sourcesContent":["import React from 'react';\nimport { render, unmount } from '../_util/react-render';\nimport Loading, { LoadingProps } from './Loading';\nimport { LoadingInstance, TdLoadingProps } from './type';\nimport PluginContainer from '../common/PluginContainer';\nimport ConfigProvider from '../config-provider';\n\nfunction createContainer(attach?: TdLoadingProps['attach']) {\n  if (typeof attach === 'string') return document.querySelector(attach);\n  if (typeof attach === 'function') return attach();\n  return document.body;\n}\n\nexport type LoadingPluginMethod = (options: boolean | LoadingProps) => LoadingInstance;\n\n// loading plugin形式\nexport const LoadingPlugin: LoadingPluginMethod = (options) => {\n  if (options === false) return { hide: () => null };\n\n  const props = typeof options === 'boolean' ? {} : options;\n  const { attach } = props;\n  const container = createContainer(attach);\n  const div = document.createElement('div');\n  div.setAttribute('style', 'width: 100%; height: 100%; position: absolute; top: 0;');\n\n  const defaultProps = {\n    loading: true,\n    attach: null,\n    fullscreen: !attach,\n    showOverlay: !!attach,\n  };\n\n  const dGlobalConfig = ConfigProvider.getGlobalConfig();\n\n  render(<PluginContainer globalConfig={dGlobalConfig}><Loading {...defaultProps} {...props} attach={null}></Loading></PluginContainer>, div);\n\n  container.appendChild(div);\n\n  return {\n    hide: () => {\n      unmount(div);\n      div.remove();\n    },\n  };\n};\n"],"names":["createContainer","attach","document","querySelector","body","LoadingPlugin","options","hide","props","container","div","createElement","setAttribute","defaultProps","loading","fullscreen","showOverlay","dGlobalConfig","ConfigProvider","getGlobalConfig","render","React","PluginContainer","globalConfig","Loading","_objectSpread","appendChild","unmount","remove"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA,SAASA,gBAAgBC,MAAmC,EAAA;EAC1D,IAAI,OAAOA,MAAW,KAAA,QAAA,EAAiB,OAAAC,QAAA,CAASC,cAAcF,MAAM,CAAA,CAAA;EACpE,IAAI,OAAOA,MAAW,KAAA,UAAA,EAAY,OAAOA,MAAO,EAAA,CAAA;EAChD,OAAOC,QAAS,CAAAE,IAAA,CAAA;AAClB,CAAA;IAKaC,aAAA,GAAqC,SAArCA,aAAAA,CAAsCC,OAAY,EAAA;AAC7D,EAAA,IAAIA,OAAY,KAAA,KAAA,EAAc,OAAA;IAAEC,IAAM,EAAA,SAANA,IAAMA,GAAA;AAAA,MAAA,OAAM,IAAK,CAAA;AAAA,KAAA;GAAA,CAAA;EAEjD,IAAMC,KAAQ,GAAA,OAAOF,OAAY,KAAA,SAAA,GAAY,EAAK,GAAAA,OAAA,CAAA;AAC5C,EAAA,IAAEL,SAAWO,KAAA,CAAXP;AACF,EAAA,IAAAQ,SAAA,GAAYT,gBAAgBC,MAAM,CAAA,CAAA;AAClC,EAAA,IAAAS,GAAA,GAAMR,QAAS,CAAAS,aAAA,CAAc,KAAK,CAAA,CAAA;AACpCD,EAAAA,GAAA,CAAAE,YAAA,CAAa,SAAS,wDAAwD,CAAA,CAAA;AAElF,EAAA,IAAMC,YAAe,GAAA;AACnBC,IAAAA,OAAS,EAAA,IAAA;AACTb,IAAAA,MAAQ,EAAA,IAAA;IACRc,YAAY,CAACd,MAAA;IACbe,WAAA,EAAa,CAAC,CAACf,MAAAA;GACjB,CAAA;AAEM,EAAA,IAAAgB,aAAA,GAAgBC,yCAAeC,eAAgB,EAAA,CAAA;AAErDC,EAAAA,wBAAA,gBAAQC,yBAAA,CAAAV,aAAA,CAAAW,iCAAA,EAAA;AAAgBC,IAAAA,YAAc,EAAAN,aAAAA;AAAA,GAAA,iBAAgBI,yBAAA,CAAAV,aAAA,CAAAa,0BAAA,EAAAC,aAAA,CAAAA,aAAA,CAAAA,aAAA,CAAYZ,EAAAA,EAAAA,YAAA,GAAkBL,KAAA,CAAA,EAAA,EAAA,EAAA;AAAOP,IAAAA,MAAQ,EAAA,IAAA;AAAA,GAAA,CAAM,CAAU,GAAoBS,GAAG,CAAA,CAAA;AAE1ID,EAAAA,SAAA,CAAUiB,YAAYhB,GAAG,CAAA,CAAA;EAElB,OAAA;AACLH,IAAAA,MAAM,SAANA,OAAY;MACVoB,yBAAA,CAAQjB,GAAG,CAAA,CAAA;MACXA,GAAA,CAAIkB,MAAO,EAAA,CAAA;AACb,KAAA;GACF,CAAA;AACF;;;;"}
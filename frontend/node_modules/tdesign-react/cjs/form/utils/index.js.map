{"version":3,"file":"index.js","sources":["../../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseHas.js","../../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/has.js","../../../../components/form/utils/index.ts"],"sourcesContent":["/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  return object != null && hasOwnProperty.call(object, key);\n}\n\nexport default baseHas;\n","import baseHas from './_baseHas.js';\nimport hasPath from './_hasPath.js';\n\n/**\n * Checks if `path` is a direct property of `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = { 'a': { 'b': 2 } };\n * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.has(object, 'a');\n * // => true\n *\n * _.has(object, 'a.b');\n * // => true\n *\n * _.has(object, ['a', 'b']);\n * // => true\n *\n * _.has(other, 'a');\n * // => false\n */\nfunction has(object, path) {\n  return object != null && hasPath(object, path, baseHas);\n}\n\nexport default has;\n","import { has, get, isObject, isArray, isEmpty } from 'lodash-es';\nimport type { NamePath } from '../type';\n\n// 获取 formMap 管理的数据\nexport function getMapValue(name: NamePath, formMapRef: React.MutableRefObject<Map<any, any>>) {\n  if (!formMapRef.current) return;\n\n  // 提取所有 map key\n  const mapKeys = [...formMapRef.current.keys()];\n  // 转译为字符串后比对 key 兼容数组格式\n  const key = mapKeys.find((key) => String(key) === String(name));\n  // 拿到 key 引用地址获取 value\n  return formMapRef.current.get(key);\n}\n\n// { user: { name: '' } } => [['user', 'name']]\n// 不处理数组类型\n// { user: [{ name: '' }]} => [['user']]\nexport function objectToArray(obj: Record<string | number, any>) {\n  const result: (string | number)[][] = [];\n\n  function traverse(current: any, path: string[] = []) {\n    if (isObject(current) && !isArray(current) && !isEmpty(current)) {\n      Object.keys(current).forEach((key) => {\n        traverse(current[key], [...path, key]);\n      });\n    } else {\n      result.push(path);\n    }\n  }\n\n  traverse(obj);\n  return result;\n}\n\n// 将数据整理成对象，数组 name 转化嵌套对象: ['user', 'name'] => { user: { name: '' } }\nexport function calcFieldValue(name: NamePath, value: any, isFormList = true) {\n  if (Array.isArray(name)) {\n    if (isFormList) {\n      const fieldValue = name.reduceRight((prev, curr) => {\n        const arr = [];\n        if (/^\\d+$/.test(String(curr))) arr[curr] = prev;\n        return arr.length ? arr : { [curr]: prev };\n      }, value);\n      return { ...fieldValue };\n    }\n    return name.reduceRight((prev, curr, currentIndex) => {\n      if (currentIndex === name.length - 1) {\n        return { [curr]: value };\n      }\n      return { [curr]: prev };\n    }, {});\n  }\n\n  return { [name]: value };\n}\n\n// 通过对象数据类型获取 map 引用: { user: { name: '' } } => formMap.get(['user', 'name'])\nexport function travelMapFromObject(\n  obj: Record<any, any>,\n  formMapRef: React.MutableRefObject<Map<any, any>>,\n  callback: Function,\n) {\n  for (const [mapName, formItemRef] of formMapRef.current.entries()) {\n    if (has(obj, mapName)) {\n      callback(formItemRef, get(obj, mapName));\n    }\n  }\n}\n"],"names":["objectProto","Object","prototype","hasOwnProperty","baseHas","object","key","call","has","path","hasPath","getMapValue","name","formMapRef","current","mapKeys","keys","find","String","get","objectToArray","obj","result","traverse","arguments","length","undefined","isObject","isArray","isEmpty","forEach","concat","_toConsumableArray","push","calcFieldValue","value","isFormList","Array","fieldValue","reduceRight","prev","curr","arr","test","_defineProperty","_objectSpread","currentIndex","travelMapFromObject","callback","_iterator","_createForOfIteratorHelper","entries","_step","s","n","done","_step$value","_slicedToArray","mapName","formItemRef","err","e","f"],"mappings":"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"}
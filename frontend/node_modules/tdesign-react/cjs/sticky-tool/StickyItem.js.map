{"version":3,"file":"StickyItem.js","sources":["../../../components/sticky-tool/StickyItem.tsx"],"sourcesContent":["import React, { useCallback, useMemo, MouseEvent } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../hooks/useConfig';\nimport type { TdStickyItemProps, TdStickyToolProps } from './type';\nimport Popup, { PopupPlacement, PopupProps } from '../popup';\nimport type { StyledProps, Styles } from '../common';\n\nexport interface StickyItemProps extends TdStickyItemProps, StyledProps {\n  type?: TdStickyToolProps['type'];\n  shape?: TdStickyToolProps['shape'];\n  placement?: TdStickyToolProps['placement'];\n  basePopupProps?: PopupProps;\n  baseWidth?: TdStickyToolProps['width'];\n  onClick?: TdStickyToolProps['onClick'];\n  onHover?: TdStickyToolProps['onHover'];\n  children?: React.ReactNode;\n}\n\nconst StickyItem = React.forwardRef<HTMLDivElement, StickyItemProps>((props, ref) => {\n  const {\n    icon,\n    label,\n    popup,\n    popupProps,\n    trigger,\n    type,\n    shape,\n    placement,\n    basePopupProps,\n    baseWidth,\n    onClick,\n    onHover,\n    style,\n    className,\n  } = props;\n  const { classPrefix } = useConfig();\n  const popupPlacement = useMemo<PopupPlacement>(() => (placement.includes('right') ? 'left' : 'right'), [placement]);\n  const styles = useMemo<React.CSSProperties>(() => {\n    const styles: Styles = { ...style };\n    if (baseWidth) {\n      const selfWidth = type === 'normal' ? '56px' : '40px';\n      styles.margin = `calc((${baseWidth} - ${selfWidth})/2)`;\n    }\n    return styles;\n  }, [baseWidth, style, type]);\n  const handleClickItem = useCallback(\n    (e: MouseEvent<HTMLDivElement>) => {\n      const item = {\n        icon,\n        label,\n        popup,\n        popupProps,\n        trigger,\n      };\n      onClick({ e, item });\n    },\n    [icon, label, popup, popupProps, trigger, onClick],\n  );\n  const handleHoverItem = useCallback(\n    (e: MouseEvent<HTMLDivElement>) => {\n      const item = {\n        icon,\n        label,\n        popup,\n        popupProps,\n        trigger,\n      };\n      onHover({ e, item });\n    },\n    [icon, label, popup, popupProps, trigger, onHover],\n  );\n  const finalPopupProps = { hideEmptyPopup: true, ...basePopupProps, ...popupProps };\n\n  return (\n    <Popup\n      overlayInnerClassName={classNames(`${classPrefix}-sticky-tool-popup-content`)}\n      trigger={props.trigger}\n      hideEmptyPopup={true}\n      placement={popupPlacement}\n      content={popup}\n      {...finalPopupProps}\n    >\n      <div\n        ref={ref}\n        className={classNames(\n          `${classPrefix}-sticky-item`,\n          `${classPrefix}-sticky-item--${shape}`,\n          `${classPrefix}-sticky-item--${type}`,\n          className,\n        )}\n        style={styles}\n        onClick={handleClickItem}\n        onMouseEnter={handleHoverItem}\n      >\n        {icon}\n        {props.type === 'normal' ? (\n          <div className={classNames(`${classPrefix}-sticky-item__label`)}>{label}</div>\n        ) : null}\n      </div>\n    </Popup>\n  );\n});\n\nStickyItem.displayName = 'StickyItem';\n\nexport default StickyItem;\n"],"names":["StickyItem","React","forwardRef","props","ref","icon","label","popup","popupProps","trigger","type","shape","placement","basePopupProps","baseWidth","onClick","onHover","style","className","_useConfig","useConfig","classPrefix","popupPlacement","useMemo","includes","styles","selfWidth","margin","concat","handleClickItem","useCallback","e","item","handleHoverItem","finalPopupProps","hideEmptyPopup","createElement","Popup","_objectSpread","overlayInnerClassName","classNames","content","onMouseEnter","displayName"],"mappings":"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"}
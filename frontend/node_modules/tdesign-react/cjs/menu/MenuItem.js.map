{"version":3,"file":"MenuItem.js","sources":["../../../components/menu/MenuItem.tsx"],"sourcesContent":["import React, { FC, useContext } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../hooks/useConfig';\nimport useDomRefCallback from '../hooks/useDomRefCallback';\nimport useRipple from '../hooks/useRipple';\nimport { TdMenuItemProps } from './type';\nimport { StyledProps } from '../common';\nimport { MenuContext } from './MenuContext';\nimport TooltipLite from '../tooltip';\n\nexport interface MenuItemProps extends TdMenuItemProps, StyledProps {}\n\nconst MenuItem: FC<MenuItemProps> = (props) => {\n  const {\n    content,\n    children = content,\n    disabled,\n    href,\n    target = '_self',\n    value,\n    className,\n    style,\n    icon,\n    onClick,\n  } = props;\n  const { classPrefix } = useConfig();\n\n  // 斜八角动画\n  const [menuItemDom, setRefCurrent] = useDomRefCallback();\n  useRipple(menuItemDom);\n\n  const { onChange, setState, active, collapsed } = useContext(MenuContext);\n\n  const handleClick = (e: React.MouseEvent<HTMLLIElement>) => {\n    e.stopPropagation();\n    if (disabled) return;\n\n    onClick && onClick({ e, value });\n    if (value !== active) onChange(value);\n    setState({ active: value });\n  };\n\n  const liContent = (\n    <li\n      ref={setRefCurrent}\n      className={classNames(`${classPrefix}-menu__item`, className, {\n        [`${classPrefix}-is-disabled`]: disabled,\n        [`${classPrefix}-is-active`]: value === active,\n        [`${classPrefix}-menu__item--plain`]: !icon,\n      })}\n      style={{ ...style }}\n      onClick={handleClick}\n    >\n      <>\n        {icon}\n        {href ? (\n          <a href={href} target={target} className={classNames(`${classPrefix}-menu__item-link`)}>\n            <span className={`${classPrefix}-menu__content`}>{children}</span>\n          </a>\n        ) : (\n          <span className={`${classPrefix}-menu__content`}>{children}</span>\n        )}\n      </>\n    </li>\n  );\n\n  // 菜单收起，且只有本身为一级菜单才需要显示 tooltip\n  if (collapsed && !disabled && !/submenu/i.test(className)) {\n    return (\n      <TooltipLite content={children} placement=\"right\" {...props.tooltipProps}>\n        {liContent}\n      </TooltipLite>\n    );\n  }\n\n  return liContent;\n};\n\nMenuItem.displayName = 'MenuItem';\n\nexport default MenuItem;\n"],"names":["MenuItem","props","content","_props$children","children","disabled","href","_props$target","target","value","className","style","icon","onClick","_useConfig","useConfig","classPrefix","_useDomRefCallback","useDomRefCallback","_useDomRefCallback2","_slicedToArray","menuItemDom","setRefCurrent","useRipple","_useContext","useContext","MenuContext","onChange","setState","active","collapsed","handleClick","e","stopPropagation","liContent","React","createElement","ref","classNames","concat","_defineProperty","_objectSpread","Fragment","test","TooltipLite","placement","tooltipProps","displayName"],"mappings":"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"}
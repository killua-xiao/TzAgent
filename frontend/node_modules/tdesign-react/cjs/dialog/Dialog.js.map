{"version":3,"file":"Dialog.js","sources":["../../../components/dialog/Dialog.tsx"],"sourcesContent":["import React, { forwardRef, useImperativeHandle, useRef } from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport classNames from 'classnames';\nimport { isUndefined } from 'lodash-es';\nimport log from '@tdesign/common-js/log/index';\nimport Portal from '../common/Portal';\nimport useAttach from '../hooks/useAttach';\nimport useConfig from '../hooks/useConfig';\nimport useDeepEffect from '../hooks/useDeepEffect';\nimport useDefaultProps from '../hooks/useDefaultProps';\nimport useSetState from '../hooks/useSetState';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport { dialogDefaultProps } from './defaultProps';\nimport DialogCard from './DialogCard';\nimport useDialogDrag from './hooks/useDialogDrag';\nimport useDialogEsc from './hooks/useDialogEsc';\nimport useDialogPosition from './hooks/useDialogPosition';\nimport useLockStyle from './hooks/useLockStyle';\nimport { parseValueToPx } from './utils';\nimport type { StyledProps } from '../common';\nimport type { DialogInstance, TdDialogProps } from './type';\n\nexport interface DialogProps extends TdDialogProps, StyledProps {\n  isPlugin?: boolean; // 是否以插件形式调用\n}\n\nconst Dialog = forwardRef<DialogInstance, DialogProps>((originalProps, ref) => {\n  const props = useDefaultProps<DialogProps>(originalProps, dialogDefaultProps);\n  const { children, ...restProps } = props;\n  const { classPrefix } = useConfig();\n\n  const componentCls = `${classPrefix}-dialog`;\n  const wrapRef = useRef<HTMLDivElement>(null);\n  const maskRef = useRef<HTMLDivElement>(null);\n  const contentClickRef = useRef(false);\n  const dialogCardRef = useRef<HTMLDivElement>(null);\n  const dialogPosition = useRef(null);\n  const portalRef = useRef(null);\n  const [state, setState] = useSetState<DialogProps>({ isPlugin: false, ...restProps });\n  const [local] = useLocaleReceiver('dialog');\n\n  const {\n    className,\n    dialogClassName,\n    style,\n    width,\n    mode,\n    zIndex,\n    visible,\n    attach,\n    onBeforeOpen,\n    onBeforeClose,\n    onOpened,\n    onCancel,\n    onConfirm,\n    onClose,\n    onClosed,\n    isPlugin,\n    draggable,\n    onOverlayClick,\n    onEscKeydown,\n    closeOnEscKeydown,\n    confirmOnEnter,\n    showOverlay,\n    showInAttachedElement,\n    closeOnOverlayClick,\n    destroyOnClose,\n    preventScrollThrough,\n    onCloseBtnClick,\n    forceRender,\n    lazy,\n    ...restState\n  } = state;\n\n  const dialogAttach = useAttach('dialog', attach);\n\n  useLockStyle({ preventScrollThrough, visible, mode, showInAttachedElement });\n  useDialogEsc(visible, wrapRef);\n  useDialogPosition(visible, dialogCardRef);\n  useDialogDrag({\n    dialogCardRef,\n    canDraggable: draggable && mode === 'modeless',\n  });\n\n  useDeepEffect(() => {\n    if (isPlugin) return;\n    // 插件式调用不会更新props, 只有组件式调用才会更新props\n    setState((prevState) => ({ ...prevState, ...props }));\n  }, [props, setState]);\n\n  useImperativeHandle(ref, () => ({\n    show() {\n      setState({ visible: true });\n    },\n    hide() {\n      setState({ visible: false });\n    },\n    setConfirmLoading: (loading: boolean) => {\n      setState({ confirmLoading: loading });\n    },\n    destroy() {\n      setState({ visible: false, destroyOnClose: true });\n    },\n    update(newOptions) {\n      setState((prevState) => ({ ...prevState, ...newOptions }));\n    },\n  }));\n\n  // @ts-ignore 兼容旧版本 2.0 移除\n  if (props.mode === 'normal') {\n    log.error('Dialog', 'mode=\"normal\" is not supported, please use DialogCard.');\n    return <DialogCard {...props} />;\n  }\n\n  const onMaskClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (showOverlay && (closeOnOverlayClick ?? local.closeOnOverlayClick)) {\n      // 判断点击事件初次点击是否为内容区域\n      if (contentClickRef.current) {\n        contentClickRef.current = false;\n      } else if (e.target === dialogPosition.current) {\n        onOverlayClick?.({ e });\n        onClose?.({ e, trigger: 'overlay' });\n      }\n    }\n  };\n\n  const handleCancel = ({ e }) => {\n    onCancel?.({ e });\n    onClose?.({ e, trigger: 'cancel' });\n  };\n\n  const handleClose = ({ e }) => {\n    onCloseBtnClick?.({ e });\n    onClose?.({ e, trigger: 'close-btn' });\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    // https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode\n    if (e.key === 'Escape') {\n      e.stopPropagation();\n      onEscKeydown?.({ e });\n      if (closeOnEscKeydown ?? local.closeOnEscKeydown) {\n        onClose?.({ e, trigger: 'esc' });\n      }\n    } else if (e.key === 'Enter' || e.key === 'NumpadEnter') {\n      // 回车键触发点击确认事件\n      e.stopPropagation();\n      confirmOnEnter && onConfirm?.({ e });\n    }\n  };\n\n  const onAnimateLeave = () => {\n    onClosed?.();\n\n    if (!wrapRef.current) return;\n    wrapRef.current.style.display = 'none';\n  };\n\n  const onAnimateStart = () => {\n    if (!wrapRef.current) return;\n    onBeforeOpen?.();\n    wrapRef.current.style.display = 'block';\n  };\n\n  const onInnerAnimateStart = () => {\n    if (!dialogCardRef.current) return;\n    dialogCardRef.current.style.display = 'block';\n  };\n\n  const onInnerAnimateLeave = () => {\n    if (!dialogCardRef.current) return;\n    dialogCardRef.current.style.display = 'none';\n  };\n\n  const renderMask = () => {\n    if (mode !== 'modal') return null;\n\n    return showOverlay ? (\n      <CSSTransition\n        in={visible}\n        appear\n        timeout={300}\n        classNames={`${componentCls}-fade`}\n        mountOnEnter\n        unmountOnExit\n        nodeRef={maskRef}\n      >\n        <div ref={maskRef} className={`${componentCls}__mask`} />\n      </CSSTransition>\n    ) : null;\n  };\n  return (\n    <CSSTransition\n      in={visible}\n      appear\n      timeout={300}\n      mountOnEnter={isUndefined(forceRender) ? lazy : !forceRender}\n      unmountOnExit={destroyOnClose}\n      nodeRef={portalRef}\n      onEnter={onAnimateStart}\n      onEntered={onOpened}\n      onExit={() => onBeforeClose?.()}\n      onExited={onAnimateLeave}\n    >\n      <Portal attach={dialogAttach} ref={portalRef}>\n        <div\n          ref={wrapRef}\n          className={classNames(className, `${componentCls}__ctx`, `${componentCls}__${mode}`, {\n            [`${componentCls}__ctx--fixed`]: !showInAttachedElement,\n            [`${componentCls}__ctx--absolute`]: showInAttachedElement,\n          })}\n          style={{ zIndex, display: 'none' }}\n          onKeyDown={handleKeyDown}\n          tabIndex={0}\n        >\n          {renderMask()}\n          <div className={`${componentCls}__wrap`}>\n            <div\n              ref={dialogPosition}\n              className={classNames(`${componentCls}__position`, {\n                [`${componentCls}--top`]: !!props.top || props.placement === 'top',\n                [`${componentCls}--center`]: props.placement === 'center' && !props.top,\n              })}\n              style={{ paddingTop: parseValueToPx(props.top) }}\n              onClick={onMaskClick}\n            >\n              <CSSTransition\n                in={visible}\n                appear\n                timeout={300}\n                classNames={`${componentCls}-zoom`}\n                nodeRef={dialogCardRef}\n                onEnter={onInnerAnimateStart}\n                onExited={onInnerAnimateLeave}\n              >\n                <DialogCard\n                  ref={dialogCardRef}\n                  {...restState}\n                  className={dialogClassName}\n                  style={{ ...style, width: parseValueToPx(width || style?.width) }}\n                  onConfirm={onConfirm}\n                  onCancel={handleCancel}\n                  onCloseBtnClick={handleClose}\n                >\n                  {children}\n                </DialogCard>\n              </CSSTransition>\n            </div>\n          </div>\n        </div>\n      </Portal>\n    </CSSTransition>\n  );\n});\n\nDialog.displayName = 'Dialog';\n\nexport default Dialog;\n"],"names":["Dialog","forwardRef","originalProps","ref","props","useDefaultProps","dialogDefaultProps","children","restProps","_objectWithoutProperties","_excluded","_useConfig","useConfig","classPrefix","componentCls","wrapRef","useRef","maskRef","contentClickRef","dialogCardRef","dialogPosition","portalRef","_useSetState","useSetState","_objectSpread","isPlugin","_useSetState2","_slicedToArray","state","setState","_useLocaleReceiver","useLocaleReceiver","_useLocaleReceiver2","local","className","dialogClassName","style","width","mode","zIndex","visible","attach","onBeforeOpen","onBeforeClose","onOpened","onCancel","onConfirm","onClose","onClosed","draggable","onOverlayClick","onEscKeydown","closeOnEscKeydown","confirmOnEnter","showOverlay","showInAttachedElement","closeOnOverlayClick","destroyOnClose","preventScrollThrough","onCloseBtnClick","forceRender","lazy","restState","_excluded2","dialogAttach","useAttach","useLockStyle","useDialogEsc","useDialogPosition","useDialogDrag","canDraggable","useDeepEffect","prevState","useImperativeHandle","show","hide","setConfirmLoading","loading","confirmLoading","destroy","update","newOptions","log","error","React","createElement","DialogCard","onMaskClick","e","current","target","trigger","handleCancel","_ref","handleClose","_ref2","handleKeyDown","key","stopPropagation","onAnimateLeave","display","onAnimateStart","onInnerAnimateStart","onInnerAnimateLeave","renderMask","CSSTransition","appear","timeout","classNames","mountOnEnter","unmountOnExit","nodeRef","isUndefined","onEnter","onEntered","onExit","onExited","Portal","concat","_defineProperty","onKeyDown","tabIndex","top","placement","paddingTop","parseValueToPx","onClick","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BMA,IAAAA,MAAS,gBAAAC,gBAAA,CAAwC,UAACC,aAAA,EAAeC,GAAQ,EAAA;AACvE,EAAA,IAAAC,KAAA,GAAQC,gCAA6B,CAAAH,aAAA,EAAeI,sCAAkB,CAAA,CAAA;AACtE,EAAA,IAAEC,QAAa,GAAcH,KAAA,CAA3BG,QAAa;AAAAC,IAAAA,SAAA,GAAAC,gDAAA,CAAcL,KAAA,EAAAM,SAAA,CAAA,CAAA;AAC7B,EAAA,IAAAC,UAAA,GAAkBC,0BAAU,EAAA;IAA1BC,WAAY,GAAAF,UAAA,CAAZE,WAAY,CAAA;AAEpB,EAAA,IAAMC,yBAAkBD,WAAA,EAAA,SAAA,CAAA,CAAA;AAClB,EAAA,IAAAE,OAAA,GAAUC,aAAuB,IAAI,CAAA,CAAA;AACrC,EAAA,IAAAC,OAAA,GAAUD,aAAuB,IAAI,CAAA,CAAA;AACrC,EAAA,IAAAE,eAAA,GAAkBF,aAAO,KAAK,CAAA,CAAA;AAC9B,EAAA,IAAAG,aAAA,GAAgBH,aAAuB,IAAI,CAAA,CAAA;AAC3C,EAAA,IAAAI,cAAA,GAAiBJ,aAAO,IAAI,CAAA,CAAA;AAC5B,EAAA,IAAAK,SAAA,GAAYL,aAAO,IAAI,CAAA,CAAA;AACvB,EAAA,IAAAM,YAAA,GAAoBC,4BAAA,CAAAC,aAAA,CAAA;AAA2BC,MAAAA,QAAU,EAAA,KAAA;KAAUjB,EAAAA,SAAA,CAAW,CAAA;IAAAkB,aAAA,GAAAC,4BAAA,CAAAL,YAAA,EAAA,CAAA,CAAA;AAA7EM,IAAAA,KAAO,GAAAF,aAAA,CAAA,CAAA,CAAA;AAAAG,IAAAA,QAAQ,GAAAH,aAAA,CAAA,CAAA,CAAA,CAAA;AACtB,EAAA,IAAAI,kBAAA,GAAgBC,sCAAA,CAAkB,QAAQ,CAAA;IAAAC,mBAAA,GAAAL,4BAAA,CAAAG,kBAAA,EAAA,CAAA,CAAA;AAAnCG,IAAAA,KAAK,GAAAD,mBAAA,CAAA,CAAA,CAAA,CAAA;AAEN,EAAA,IACJE,SAAA,GA8BEN,KAAA,CA9BFM,SAAA;IACAC,eAAA,GA6BEP,KAAA,CA7BFO,eAAA;IACAC,KAAA,GA4BER,KAAA,CA5BFQ,KAAA;IACAC,KAAA,GA2BET,KAAA,CA3BFS,KAAA;IACAC,IAAA,GA0BEV,KAAA,CA1BFU,IAAA;IACAC,MAAA,GAyBEX,KAAA,CAzBFW,MAAA;IACAC,OAAA,GAwBEZ,KAAA,CAxBFY,OAAA;IACAC,MAAA,GAuBEb,KAAA,CAvBFa,MAAA;IACAC,YAAA,GAsBEd,KAAA,CAtBFc,YAAA;IACAC,aAAA,GAqBEf,KAAA,CArBFe,aAAA;IACAC,QAAA,GAoBEhB,KAAA,CApBFgB,QAAA;IACAC,QAAA,GAmBEjB,KAAA,CAnBFiB,QAAA;IACAC,SAAA,GAkBElB,KAAA,CAlBFkB,SAAA;IACAC,OAAA,GAiBEnB,KAAA,CAjBFmB,OAAA;IACAC,QAAA,GAgBEpB,KAAA,CAhBFoB,QAAA;IACAvB,QAAA,GAeEG,KAAA,CAfFH,QAAA;IACAwB,SAAA,GAcErB,KAAA,CAdFqB,SAAA;IACAC,cAAA,GAaEtB,KAAA,CAbFsB,cAAA;IACAC,YAAA,GAYEvB,KAAA,CAZFuB,YAAA;IACAC,iBAAA,GAWExB,KAAA,CAXFwB,iBAAA;IACAC,cAAA,GAUEzB,KAAA,CAVFyB,cAAA;IACAC,WAAA,GASE1B,KAAA,CATF0B,WAAA;IACAC,qBAAA,GAQE3B,KAAA,CARF2B,qBAAA;IACAC,mBAAA,GAOE5B,KAAA,CAPF4B,mBAAA;IACAC,cAAA,GAME7B,KAAA,CANF6B,cAAA;IACAC,oBAAA,GAKE9B,KAAA,CALF8B,oBAAA;IACAC,eAAA,GAIE/B,KAAA,CAJF+B,eAAA;IACAC,WAAA,GAGEhC,KAAA,CAHFgC,WAAA;IACAC,IAAA,GAEEjC,KAAA,CAFFiC,IAAA;AACGC,IAAAA,SAAA,GAAArD,gDAAA,CACDmB,KAAA,EAAAmC,UAAA,CAAA,CAAA;AAEE,EAAA,IAAAC,YAAA,GAAeC,0BAAU,CAAA,QAAA,EAAUxB,MAAM,CAAA,CAAA;AAE/CyB,EAAAA,oCAAA,CAAa;AAAER,IAAAA,oBAAA,EAAAA,oBAAA;AAAsBlB,IAAAA,OAAS,EAATA,OAAS;AAAAF,IAAAA,IAAA,EAAAA,IAAA;AAAMiB,IAAAA,uBAAAA,qBAAAA;AAAsB,GAAC,CAAA,CAAA;AAC3EY,EAAAA,oCAAA,CAAa3B,SAASzB,OAAO,CAAA,CAAA;AAC7BqD,EAAAA,yCAAA,CAAkB5B,SAASrB,aAAa,CAAA,CAAA;AAC1BkD,EAAAA,qCAAA,CAAA;AACZlD,IAAAA,aAAA,EAAAA,aAAA;AACAmD,IAAAA,YAAA,EAAcrB,aAAaX,IAAS,KAAA,UAAA;AACtC,GAAC,CAAA,CAAA;AAEDiC,EAAAA,8BAAA,CAAc,YAAM;AACd,IAAA,IAAA9C,QAAA,EAAU,OAAA;IAEdI,QAAA,CAAS,UAAC2C,SAAe,EAAA;AAAA,MAAA,OAAAhD,aAAA,CAAAA,aAAA,CAAKgD,EAAAA,EAAAA,SAAW,GAAGpE;KAAQ,CAAA,CAAA;AACtD,GAAG,EAAA,CAACA,KAAO,EAAAyB,QAAQ,CAAC,CAAA,CAAA;EAEpB4C,yBAAA,CAAoBtE,KAAK,YAAA;IAAA,OAAO;MAC9BuE,IAAO,EAAA,SAAPA,IAAOA,GAAA;AACI7C,QAAAA,QAAA,CAAA;AAAEW,UAAAA,OAAS,EAAA,IAAA;AAAK,SAAC,CAAA,CAAA;OAC5B;MACAmC,IAAO,EAAA,SAAPA,IAAOA,GAAA;AACI9C,QAAAA,QAAA,CAAA;AAAEW,UAAAA,OAAS,EAAA,KAAA;AAAM,SAAC,CAAA,CAAA;OAC7B;AACAoC,MAAAA,iBAAA,EAAmB,SAAnBA,iBAAAA,CAAoBC,OAAqB,EAAA;AAC9BhD,QAAAA,QAAA,CAAA;AAAEiD,UAAAA,cAAgB,EAAAD,OAAAA;AAAQ,SAAC,CAAA,CAAA;OACtC;MACAE,OAAU,EAAA,SAAVA,OAAUA,GAAA;AACRlD,QAAAA,QAAA,CAAS;AAAEW,UAAAA,OAAA,EAAS,KAAO;AAAAiB,UAAAA,cAAA,EAAgB,IAAA;AAAK,SAAC,CAAA,CAAA;OACnD;AACAuB,MAAAA,QAAAA,SAAAA,OAAOC,UAAY,EAAA;QACjBpD,QAAA,CAAS,UAAC2C,SAAe,EAAA;AAAA,UAAA,OAAAhD,aAAA,CAAAA,aAAA,CAAKgD,EAAAA,EAAAA,SAAW,GAAGS;SAAa,CAAA,CAAA;AAC3D,OAAA;KACA,CAAA;AAAA,GAAA,CAAA,CAAA;AAGE,EAAA,IAAA7E,KAAA,CAAMkC,SAAS,QAAU,EAAA;AACvB4C,IAAAA,OAAA,CAAAC,KAAA,CAAM,UAAU,wDAAwD,CAAA,CAAA;IAC5E,sBAAQC,yBAAA,CAAAC,aAAA,CAAAC,4BAAA,EAAA9D,aAAA,CAAA,EAAA,EAAepB,KAAA,CAAO,CAAA,CAAA;AAChC,GAAA;AAEM,EAAA,IAAAmF,WAAA,GAAc,SAAdA,WAAAA,CAAeC,CAAwC,EAAA;AACvD,IAAA,IAAAlC,WAAA,KAAgBE,mBAAuB,KAAA,IAAA,IAAvBA,mBAAuB,KAAA,KAAA,CAAA,GAAvBA,mBAAuB,GAAAvB,KAAA,CAAMuB,mBAAsB,CAAA,EAAA;MAErE,IAAItC,gBAAgBuE,OAAS,EAAA;QAC3BvE,eAAA,CAAgBuE,OAAU,GAAA,KAAA,CAAA;OACjB,MAAA,IAAAD,CAAA,CAAEE,MAAW,KAAAtE,cAAA,CAAeqE,OAAS,EAAA;AAC7BvC,QAAAA,cAAA,KAAAA,IAAAA,IAAAA,cAAA,KAAAA,KAAAA,CAAAA,IAAAA,cAAA,CAAA;AAAEsC,UAAAA,GAAAA,CAAAA;AAAE,SAAC,CAAA,CAAA;AACtBzC,QAAAA,OAAA,KAAAA,IAAAA,IAAAA,OAAA,KAAAA,KAAAA,CAAAA,IAAAA,OAAA,CAAU;AAAEyC,UAAAA,CAAA,EAAAA,CAAA;AAAGG,UAAAA,OAAS,EAAA,SAAA;AAAU,SAAC,CAAA,CAAA;AACrC,OAAA;AACF,KAAA;GACF,CAAA;AAEA,EAAA,IAAMC,YAAe,GAAA,SAAfA,YAAeA,CAAAC,IAAA,EAAW;AAAA,IAAA,IAARL,CAAA,GAAAK,IAAA,CAAAL,CAAA,CAAA;AACX3C,IAAAA,QAAA,KAAAA,IAAAA,IAAAA,QAAA,KAAAA,KAAAA,CAAAA,IAAAA,QAAA,CAAA;AAAE2C,MAAAA,GAAAA,CAAAA;AAAE,KAAC,CAAA,CAAA;AAChBzC,IAAAA,OAAA,KAAAA,IAAAA,IAAAA,OAAA,KAAAA,KAAAA,CAAAA,IAAAA,OAAA,CAAU;AAAEyC,MAAAA,CAAA,EAAAA,CAAA;AAAGG,MAAAA,OAAS,EAAA,QAAA;AAAS,KAAC,CAAA,CAAA;GACpC,CAAA;AAEA,EAAA,IAAMG,WAAc,GAAA,SAAdA,WAAcA,CAAAC,KAAA,EAAW;AAAA,IAAA,IAARP,CAAA,GAAAO,KAAA,CAAAP,CAAA,CAAA;AACH7B,IAAAA,eAAA,KAAAA,IAAAA,IAAAA,eAAA,KAAAA,KAAAA,CAAAA,IAAAA,eAAA,CAAA;AAAE6B,MAAAA,GAAAA,CAAAA;AAAE,KAAC,CAAA,CAAA;AACvBzC,IAAAA,OAAA,KAAAA,IAAAA,IAAAA,OAAA,KAAAA,KAAAA,CAAAA,IAAAA,OAAA,CAAU;AAAEyC,MAAAA,CAAA,EAAAA,CAAA;AAAGG,MAAAA,OAAS,EAAA,WAAA;AAAY,KAAC,CAAA,CAAA;GACvC,CAAA;AAEM,EAAA,IAAAK,aAAA,GAAgB,SAAhBA,aAAAA,CAAiBR,CAA2C,EAAA;AAE5D,IAAA,IAAAA,CAAA,CAAES,QAAQ,QAAU,EAAA;MACtBT,CAAA,CAAEU,eAAgB,EAAA,CAAA;AACH/C,MAAAA,YAAA,KAAAA,IAAAA,IAAAA,YAAA,KAAAA,KAAAA,CAAAA,IAAAA,YAAA,CAAA;AAAEqC,QAAAA,GAAAA,CAAAA;AAAE,OAAC,CAAA,CAAA;MAChB,IAAApC,iBAAA,aAAAA,iBAAA,KAAA,KAAA,CAAA,GAAAA,iBAAA,GAAqBnB,MAAMmB,iBAAmB,EAAA;AAChDL,QAAAA,OAAA,KAAAA,IAAAA,IAAAA,OAAA,KAAAA,KAAAA,CAAAA,IAAAA,OAAA,CAAU;AAAEyC,UAAAA,CAAA,EAAAA,CAAA;AAAGG,UAAAA,OAAS,EAAA,KAAA;AAAM,SAAC,CAAA,CAAA;AACjC,OAAA;AACF,eAAWH,CAAE,CAAAS,GAAA,KAAQ,OAAW,IAAAT,CAAA,CAAES,QAAQ,aAAe,EAAA;MAEvDT,CAAA,CAAEU,eAAgB,EAAA,CAAA;AACA7C,MAAAA,cAAA,KAAAP,SAAA,KAAA,IAAA,IAAAA,SAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,SAAA,CAAY;AAAE0C,QAAAA,CAAA,EAAAA,CAAAA;AAAE,OAAC,CAAA,CAAA,CAAA;AACrC,KAAA;GACF,CAAA;AAEA,EAAA,IAAMW,iBAAiB,SAAjBA,iBAAuB;AAChBnD,IAAAA,QAAA,KAAAA,IAAAA,IAAAA,QAAA,KAAAA,KAAAA,CAAAA,IAAAA,QAAA,EAAA,CAAA;AAEX,IAAA,IAAI,CAACjC,OAAQ,CAAA0E,OAAA,EAAS,OAAA;AACd1E,IAAAA,OAAA,CAAA0E,OAAA,CAAQrD,MAAMgE,OAAU,GAAA,MAAA,CAAA;GAClC,CAAA;AAEA,EAAA,IAAMC,iBAAiB,SAAjBA,iBAAuB;AAC3B,IAAA,IAAI,CAACtF,OAAQ,CAAA0E,OAAA,EAAS,OAAA;AACP/C,IAAAA,YAAA,KAAAA,IAAAA,IAAAA,YAAA,KAAAA,KAAAA,CAAAA,IAAAA,YAAA,EAAA,CAAA;AACP3B,IAAAA,OAAA,CAAA0E,OAAA,CAAQrD,MAAMgE,OAAU,GAAA,OAAA,CAAA;GAClC,CAAA;AAEA,EAAA,IAAME,sBAAsB,SAAtBA,sBAA4B;AAChC,IAAA,IAAI,CAACnF,aAAc,CAAAsE,OAAA,EAAS,OAAA;AACdtE,IAAAA,aAAA,CAAAsE,OAAA,CAAQrD,MAAMgE,OAAU,GAAA,OAAA,CAAA;GACxC,CAAA;AAEA,EAAA,IAAMG,sBAAsB,SAAtBA,sBAA4B;AAChC,IAAA,IAAI,CAACpF,aAAc,CAAAsE,OAAA,EAAS,OAAA;AACdtE,IAAAA,aAAA,CAAAsE,OAAA,CAAQrD,MAAMgE,OAAU,GAAA,MAAA,CAAA;GACxC,CAAA;AAEA,EAAA,IAAMI,aAAa,SAAbA,aAAmB;AACvB,IAAA,IAAIlE,IAAS,KAAA,OAAA,EAAgB,OAAA,IAAA,CAAA;IAE7B,OAAOgB,6BACJ8B,yBAAA,CAAAC,aAAA,CAAAoB,kCAAA,EAAA;AACC,MAAA,IAAA,EAAIjE,OAAA;AACJkE,MAAAA,MAAM,EAAA,IAAA;AACNC,MAAAA,OAAS,EAAA,GAAA;AACTC,MAAAA,sBAAe9F,YAAA,EAAA,OAAA,CAAA;AACf+F,MAAAA,YAAY,EAAA,IAAA;AACZC,MAAAA,aAAa,EAAA,IAAA;AACbC,MAAAA,OAAS,EAAA9F,OAAAA;AAAA,KAAA,iBAERmE,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAIlF,MAAAA,GAAK,EAAAc,OAAA;MAASiB,qBAAcpB,YAAA,EAAA,QAAA,CAAA;KAAsB,CACzD,CACE,GAAA,IAAA,CAAA;GACN,CAAA;AACA,EAAA,sBACGsE,yBAAA,CAAAC,aAAA,CAAAoB,kCAAA,EAAA;AACC,IAAA,IAAA,EAAIjE,OAAA;AACJkE,IAAAA,MAAM,EAAA,IAAA;AACNC,IAAAA,OAAS,EAAA,GAAA;IACTE,YAAc,EAAAG,uBAAA,CAAYpD,WAAW,CAAA,GAAIC,OAAO,CAACD,WAAA;AACjDkD,IAAAA,aAAe,EAAArD,cAAA;AACfsD,IAAAA,OAAS,EAAA1F,SAAA;AACT4F,IAAAA,OAAS,EAAAZ,cAAA;AACTa,IAAAA,SAAW,EAAAtE,QAAA;IACXuE,MAAA,EAAQ,SAARA,MAAAA,GAAA;AAAA,MAAA,OAAcxE,aAAgB,KAAhBA,IAAAA,IAAAA,aAAgB,KAAhBA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,aAAgB,EAAA,CAAA;AAAA,KAAA;AAC9ByE,IAAAA,QAAU,EAAAjB,cAAAA;AAAA,GAAA,iBAETf,yBAAA,CAAAC,aAAA,CAAAgC,wBAAA,EAAA;AAAO5E,IAAAA,MAAQ,EAAAuB,YAAA;AAAc7D,IAAAA,GAAK,EAAAkB,SAAAA;AAAA,GAAA,iBAChC+D,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACClF,IAAAA,GAAK,EAAAY,OAAA;AACLmB,IAAAA,WAAW0E,8BAAW,CAAA1E,SAAA,KAAAoF,MAAA,CAAcxG,YAAqB,EAAA,OAAA,CAAA,EAAA,EAAA,CAAAwG,MAAA,CAAGxG,2BAAiBwB,IAAQ,CAAA,EAAAiF,8BAAA,CAAAA,8BAAA,CAAA,EAAA,EAAA,EAAA,CAAAD,MAAA,CAC/ExG,YAAA,EAA6B,cAAA,CAAA,EAAA,CAACyC,qBAAA,CAAA,EAAA,EAAA,CAAA+D,MAAA,CAC9BxG,YAAgC,EAAAyC,iBAAAA,CAAAA,EAAAA,qBAAA,CACrC,CAAA;AACDnB,IAAAA,KAAO,EAAA;AAAEG,MAAAA,MAAQ,EAARA,MAAQ;AAAA6D,MAAAA,OAAA,EAAS,MAAA;KAAO;AACjCoB,IAAAA,SAAW,EAAAxB,aAAA;AACXyB,IAAAA,QAAU,EAAA,CAAA;GAET,EAAAjB,UAAA,mBACApB,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;IAAInD,qBAAcpB,YAAA,EAAA,QAAA,CAAA;AAAA,GAAA,iBAChBsE,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACClF,IAAAA,GAAK,EAAAiB,cAAA;AACLc,IAAAA,SAAA,EAAW0E,8BAAW,CAAA,EAAA,CAAAU,MAAA,CAAGxG,YAA0B,iBAAAyG,8BAAA,CAAAA,8BAAA,CAAAD,EAAAA,EAAAA,EAAAA,CAAAA,MAAA,CAC7CxG,YAAsB,EAAA,OAAA,CAAA,EAAA,CAAC,CAACV,KAAM,CAAAsH,GAAA,IAAOtH,MAAMuH,SAAc,KAAA,KAAA,MAAAL,MAAA,CACzDxG,YAAA,EAAyBV,UAAAA,CAAAA,EAAAA,MAAMuH,SAAc,KAAA,QAAA,IAAY,CAACvH,KAAM,CAAAsH,GAAA,CACrE,CAAA;AACDtF,IAAAA,OAAO;AAAEwF,MAAAA,UAAA,EAAYC,2BAAe,CAAAzH,KAAA,CAAMsH,GAAG,CAAA;KAAE;AAC/CI,IAAAA,OAAS,EAAAvC,WAAAA;AAAA,GAAA,iBAERH,yBAAA,CAAAC,aAAA,CAAAoB,kCAAA,EAAA;AACC,IAAA,IAAA,EAAIjE,OAAA;AACJkE,IAAAA,MAAM,EAAA,IAAA;AACNC,IAAAA,OAAS,EAAA,GAAA;AACTC,IAAAA,sBAAe9F,YAAA,EAAA,OAAA,CAAA;AACfiG,IAAAA,OAAS,EAAA5F,aAAA;AACT8F,IAAAA,OAAS,EAAAX,mBAAA;AACTc,IAAAA,QAAU,EAAAb,mBAAAA;GAAA,iBAETnB,yBAAA,CAAAC,aAAA,CAAAC,4BAAA,EAAA9D,aAAA,CAAAA,aAAA,CAAA;AACCrB,IAAAA,GAAK,EAAAgB,aAAAA;AAAA,GAAA,EACD2C,SAAA,CAAA,EAAA,EAAA,EAAA;AACJ5B,IAAAA,SAAW,EAAAC,eAAA;AACXC,IAAAA,KAAA,EAAAZ,aAAA,CAAAA,aAAA,KAAYY,KAAA,CAAA,EAAA,EAAA,EAAA;MAAOC,OAAOwF,2BAAe,CAAAxF,KAAA,KAASD,KAAO,KAAA,IAAA,IAAPA,KAAO,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAPA,KAAO,CAAAC,KAAK,CAAA,CAAA;KAAE,CAAA;AAChES,IAAAA,SAAA,EAAAA,SAAA;AACAD,IAAAA,QAAU,EAAA+C,YAAA;AACVjC,IAAAA,eAAiB,EAAAmC,WAAAA;AAAA,GAAA,CAAA,EAEhBvF,QACH,CACF,CACF,CACF,CACF,CACF,CACF,CAAA,CAAA;AAEJ,CAAC,EAAA;AAEDP,MAAA,CAAO+H,WAAc,GAAA,QAAA;;;;"}
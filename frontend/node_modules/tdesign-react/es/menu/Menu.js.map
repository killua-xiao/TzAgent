{"version":3,"file":"Menu.js","sources":["../../../components/menu/Menu.tsx"],"sourcesContent":["import React from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../hooks/useConfig';\nimport { StyledProps } from '../common';\nimport { TdMenuProps } from './type';\nimport forwardRefWithStatics from '../_util/forwardRefWithStatics';\nimport { MenuContext } from './MenuContext';\nimport { DEFAULT_MENU_WIDTH } from './_util/constant';\nimport useMenuContext from './hooks/useMenuContext';\nimport { menuDefaultProps } from './defaultProps';\n\nimport HeadMenu from './HeadMenu';\nimport SubMenu from './SubMenu';\nimport MenuItem from './MenuItem';\nimport MenuGroup from './MenuGroup';\nimport useDefaultProps from '../hooks/useDefaultProps';\n\nexport interface MenuProps extends TdMenuProps, StyledProps {\n  children?: React.ReactNode;\n}\n\nconst Menu = forwardRefWithStatics(\n  (originalProps: MenuProps, ref: React.RefObject<HTMLDivElement>) => {\n    const props = useDefaultProps<MenuProps>(originalProps, menuDefaultProps);\n    const { className, width = DEFAULT_MENU_WIDTH, children, theme, logo, operations, style } = props;\n    const { classPrefix } = useConfig();\n    const { value } = useMenuContext({ ...props, children, mode: 'accordion' });\n\n    // 菜单宽度\n    const menuWidthArr = Array.isArray(width) ? width : [width, DEFAULT_MENU_WIDTH[1]];\n\n    const { collapsed } = value;\n\n    return (\n      <MenuContext.Provider value={value}>\n        <div\n          ref={ref}\n          className={classNames(`${classPrefix}-default-menu`, className, {\n            [`${classPrefix}-is-collapsed`]: collapsed,\n            [`${classPrefix}-menu--dark`]: theme === 'dark',\n          })}\n          style={{ width: collapsed ? menuWidthArr[1] : menuWidthArr[0], ...style }}\n        >\n          <div className={`${classPrefix}-default-menu__inner`}>\n            {logo && <div className={`${classPrefix}-menu__logo`}>{logo}</div>}\n            <ul className={classNames(`${classPrefix}-menu`, `${classPrefix}-menu--scroll`)}>{children}</ul>\n            {operations && <div className={`${classPrefix}-menu__operations`}>{operations}</div>}\n          </div>\n        </div>\n      </MenuContext.Provider>\n    );\n  },\n  { HeadMenu, SubMenu, MenuItem, MenuGroup },\n);\n\nMenu.displayName = 'Menu';\n\nexport default Menu;\n"],"names":["Menu","forwardRefWithStatics","originalProps","ref","props","useDefaultProps","menuDefaultProps","className","width","_props$width","DEFAULT_MENU_WIDTH","children","theme","logo","operations","style","_useConfig","useConfig","classPrefix","_useMenuContext","useMenuContext","_objectSpread","mode","value","menuWidthArr","Array","isArray","collapsed","React","createElement","MenuContext","Provider","classNames","concat","_defineProperty","HeadMenu","SubMenu","MenuItem","MenuGroup","displayName"],"mappings":"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"}
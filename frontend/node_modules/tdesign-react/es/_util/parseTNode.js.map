{"version":3,"file":"parseTNode.js","sources":["../../../components/_util/parseTNode.ts"],"sourcesContent":["import React, { ReactElement, ReactNode } from 'react';\nimport { isFunction } from 'lodash-es';\nimport log from '@tdesign/common-js/log/index';\nimport { TNode } from '../common';\n\n// 解析 TNode 数据结构\nexport default function parseTNode(\n  renderNode: TNode | TNode<any> | undefined,\n  renderParams?: any,\n  defaultNode?: ReactNode,\n): ReactNode {\n  let node: ReactNode = null;\n\n  if (typeof renderNode === 'function') {\n    node = renderNode(renderParams);\n  } else if (renderNode === true) {\n    node = defaultNode;\n  } else if (renderNode !== null) {\n    node = renderNode ?? defaultNode;\n  }\n  return node as ReactNode;\n}\n\n/**\n * 解析各种数据类型的 TNode\n * 函数类型：content={(props) => <Icon></Icon>}\n * 组件类型：content={<Button>click me</Button>} 这种方式可以避免函数重复渲染，对应的 props 已经注入\n * 字符类型\n */\nexport function parseContentTNode<T>(tnode: TNode<T>, props: T) {\n  if (isFunction(tnode)) return tnode(props) as ReactNode;\n  if (!tnode || ['string', 'number', 'boolean'].includes(typeof tnode)) return tnode as ReactNode;\n  try {\n    return React.cloneElement(tnode as ReactElement, { ...props });\n  } catch (e) {\n    log.warn('parseContentTNode', `${tnode} is not a valid ReactNode`);\n    return null;\n  }\n}\n"],"names":["parseTNode","renderNode","renderParams","defaultNode","node","parseContentTNode","tnode","props","isFunction","includes","_typeof","React","cloneElement","_objectSpread","e","log","warn","concat"],"mappings":";;;;;;;;;;;;;;;AAMwB,SAAAA,UAAAA,CACtBC,UACA,EAAAC,YAAA,EACAC,WACW,EAAA;EACX,IAAIC,IAAkB,GAAA,IAAA,CAAA;AAElB,EAAA,IAAA,OAAOH,eAAe,UAAY,EAAA;AACpCG,IAAAA,IAAA,GAAOH,WAAWC,YAAY,CAAA,CAAA;AAChC,GAAA,MAAA,IAAWD,eAAe,IAAM,EAAA;AACvBG,IAAAA,IAAA,GAAAD,WAAA,CAAA;AACT,GAAA,MAAA,IAAWF,eAAe,IAAM,EAAA;AAC9BG,IAAAA,IAAA,GAAOH,UAAc,KAAA,IAAA,IAAdA,UAAc,KAAdA,KAAAA,CAAAA,GAAAA,UAAc,GAAAE,WAAA,CAAA;AACvB,GAAA;AACO,EAAA,OAAAC,IAAA,CAAA;AACT,CAAA;AAQgB,SAAAC,iBAAAA,CAAqBC,OAAiBC,KAAU,EAAA;EAC9D,IAAIC,WAAWF,KAAK,CAAA,EAAG,OAAOA,MAAMC,KAAK,CAAA,CAAA;AACrC,EAAA,IAAA,CAACD,SAAS,CAAC,QAAA,EAAU,UAAU,SAAS,CAAA,CAAEG,QAAS,CAAAC,OAAA,CAAOJ,KAAK,CAAA,CAAA,EAAU,OAAAA,KAAA,CAAA;EACzE,IAAA;IACF,oBAAOK,MAAMC,YAAa,CAAAN,KAAA,EAAAO,aAAA,CAAA,EAAA,EAA4BN,MAAO,CAAA,CAAA;WACtDO,CAAP,EAAA;IACIC,GAAA,CAAAC,IAAA,CAAK,mBAAqB,KAAAC,MAAA,CAAGX,KAAgC,EAAA,2BAAA,CAAA,CAAA,CAAA;AAC1D,IAAA,OAAA,IAAA,CAAA;AACT,GAAA;AACF;;;;"}
{"version":3,"file":"Timeline.js","sources":["../../../components/timeline/Timeline.tsx"],"sourcesContent":["import classNames from 'classnames';\nimport React from 'react';\nimport { StyledProps } from '../common';\nimport useConfig from '../hooks/useConfig';\nimport TimelineItem from './TimelineItem';\nimport { TdTimelineProps } from './type';\nimport TimelineContext from './TimelineContext';\nimport forwardRefWithStatics from '../_util/forwardRefWithStatics';\nimport { useAlign } from './useAlign';\n\nimport type { TimelineItemProps } from './TimelineItem';\n\nexport interface TimelineProps extends TdTimelineProps, StyledProps {\n  children?: React.ReactNode;\n}\n\nconst Timeline = forwardRefWithStatics(\n  (props: TimelineProps, ref: React.Ref<HTMLUListElement>) => {\n    const {\n      theme = 'default',\n      labelAlign,\n      children,\n      className,\n      style,\n      reverse = false,\n      layout = 'vertical',\n      mode = 'alternate',\n    } = props;\n    const { classPrefix } = useConfig();\n    const renderAlign = useAlign(labelAlign, layout);\n\n    const timelineItems = React.Children.toArray(children).filter(\n      (child: React.ReactElement<TimelineItemProps>) => (child.type as any)?.displayName === TimelineItem.displayName,\n    );\n    // 获取所有子节点类型\n    const itemsStatus = React.Children.map(\n      timelineItems,\n      (child: React.ReactElement<TimelineItemProps>) => child.props?.dotColor || 'primary',\n    );\n    const hasLabelItem = timelineItems.some((item: React.ReactElement<TimelineItemProps>) => !!item?.props?.label);\n\n    if (reverse) {\n      timelineItems.reverse();\n    }\n\n    const itemsCounts = React.Children.count(timelineItems);\n\n    const timelineClassName = classNames(\n      `${classPrefix}-timeline`,\n      {\n        [`${classPrefix}-timeline-${renderAlign}`]: true,\n        [`${classPrefix}-timeline-reverse`]: reverse,\n        [`${classPrefix}-timeline-${layout}`]: true,\n        [`${classPrefix}-timeline-label`]: hasLabelItem,\n        [`${classPrefix}-timeline-label--${mode}`]: true,\n      },\n      className,\n    );\n\n    return (\n      <TimelineContext.Provider value={{ theme, reverse, itemsStatus, layout, globalAlign: labelAlign, mode }}>\n        <ul className={timelineClassName} style={style} ref={ref}>\n          {React.Children.map(timelineItems, (ele: React.ReactElement<TimelineItemProps>, index) =>\n            React.cloneElement(ele, {\n              index,\n              className: classNames([ele?.props?.className], {\n                [`${classPrefix}-timeline-item--last`]: index === itemsCounts - 1,\n              }),\n            }),\n          )}\n        </ul>\n      </TimelineContext.Provider>\n    );\n  },\n  {\n    Item: TimelineItem,\n  },\n);\n\nTimeline.displayName = 'Timeline';\n\nexport default Timeline;\n"],"names":["Timeline","forwardRefWithStatics","props","ref","_props$theme","theme","labelAlign","children","className","style","_props$reverse","reverse","_props$layout","layout","_props$mode","mode","_useConfig","useConfig","classPrefix","renderAlign","useAlign","timelineItems","React","Children","toArray","filter","child","_child$type","type","displayName","TimelineItem","itemsStatus","map","_child$props","dotColor","hasLabelItem","some","item","_item$props","label","itemsCounts","count","timelineClassName","classNames","concat","_defineProperty","createElement","TimelineContext","Provider","value","globalAlign","ele","index","_ele$props","cloneElement","Item"],"mappings":"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"}
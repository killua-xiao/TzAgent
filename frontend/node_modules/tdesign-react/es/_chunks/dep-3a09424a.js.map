{"version":3,"file":"dep-3a09424a.js","sources":["../../../components/_util/style.ts","../../../components/_util/dom.ts"],"sourcesContent":["import { canUseDocument } from './dom';\n\nconst trim = (str: string): string => (str || '').replace(/^[\\s\\uFEFF]+|[\\s\\uFEFF]+$/g, '');\n\nexport function hasClass(el: Element, cls: string) {\n  if (!el || !cls) return false;\n  if (cls.indexOf(' ') !== -1) throw new Error('className should not contain space.');\n  if (el.classList) {\n    return el.classList.contains(cls);\n  }\n  return ` ${el.className} `.indexOf(` ${cls} `) > -1;\n}\n\nexport const addClass = function (el: Element, cls: string) {\n  if (!el) return;\n  let curClass = el.className;\n  const classes = (cls || '').split(' ');\n\n  for (let i = 0, j = classes.length; i < j; i++) {\n    const clsName = classes[i];\n    if (!clsName) continue;\n\n    if (el.classList) {\n      el.classList.add(clsName);\n    } else if (!hasClass(el, clsName)) {\n      curClass += ` ${clsName}`;\n    }\n  }\n  if (!el.classList) {\n    // eslint-disable-next-line\n    el.className = curClass;\n  }\n};\n\nexport const removeClass = function (el: Element, cls: string) {\n  if (!el || !cls) return;\n  const classes = cls.split(' ');\n  let curClass = ` ${el.className} `;\n\n  for (let i = 0, j = classes.length; i < j; i++) {\n    const clsName = classes[i];\n    if (!clsName) continue;\n\n    if (el.classList) {\n      el.classList.remove(clsName);\n    } else if (hasClass(el, clsName)) {\n      curClass = curClass.replace(` ${clsName} `, ' ');\n    }\n  }\n  if (!el.classList) {\n    // eslint-disable-next-line\n    el.className = trim(curClass);\n  }\n};\n\n// 获取 css vars\nexport const getCssVarsValue = (name: string, element?: HTMLElement) => {\n  if (!canUseDocument) return;\n\n  const el = element || document.documentElement;\n  return getComputedStyle(el).getPropertyValue(name);\n};\n","import { isString } from 'lodash-es';\nimport { getCssVarsValue } from './style';\n\n// 用于判断是否可使用 dom\nexport const canUseDocument = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n\n/**\n * 返回是否 window 对象\n *\n * @export\n * @param {any} obj\n * @returns\n */\nexport const isWindow = (val: unknown): val is Window => val === window;\n\nexport const getAttach = (node: any): HTMLElement => {\n  const attachNode = typeof node === 'function' ? node() : node;\n  if (!attachNode) {\n    return document.body;\n  }\n  if (isString(attachNode)) {\n    return document.querySelector(attachNode);\n  }\n  if (attachNode instanceof HTMLElement) {\n    return attachNode;\n  }\n  return document.body;\n};\n\n/**\n * 检查元素是否在父元素视图\n * http://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport\n * @param elm 元素\n * @param parent\n * @returns boolean\n */\nexport function elementInViewport(elm: HTMLElement, parent?: HTMLElement): boolean {\n  const rect = elm.getBoundingClientRect();\n  if (parent) {\n    const parentRect = parent.getBoundingClientRect();\n    return (\n      rect.top >= parentRect.top &&\n      rect.left >= parentRect.left &&\n      rect.bottom <= parentRect.bottom &&\n      rect.right <= parentRect.right\n    );\n  }\n  return rect.top >= 0 && rect.left >= 0 && rect.bottom + 80 <= window.innerHeight && rect.right <= window.innerWidth;\n}\n\n/**\n * 判断元素是否处在 position fixed 中\n * @param element 元素\n * @returns boolean\n */\nexport function isFixed(element: HTMLElement): boolean {\n  const p = element.parentNode as HTMLElement;\n\n  if (!p || p.nodeName === 'HTML') {\n    return false;\n  }\n\n  if (getCssVarsValue('position', element) === 'fixed') {\n    return true;\n  }\n\n  return isFixed(p);\n}\n\n/**\n * 获取当前视图的大小\n * @returns { width: number, height: number }\n */\nexport function getWindowSize(): { width: number; height: number } {\n  if (canUseDocument) {\n    return { width: window.innerWidth, height: window.innerHeight };\n  }\n  return { width: 0, height: 0 };\n}\n"],"names":["trim","str","replace","hasClass","el","cls","indexOf","Error","classList","contains","concat","className","addClass","curClass","classes","split","i","j","length","clsName","add","removeClass","remove","getCssVarsValue","name","element","canUseDocument","document","documentElement","getComputedStyle","getPropertyValue","window","createElement","isWindow","val","getAttach","node","attachNode","body","isString","querySelector","HTMLElement","elementInViewport","elm","parent","rect","getBoundingClientRect","parentRect","top","left","bottom","right","innerHeight","innerWidth","isFixed","p","parentNode","nodeName","getWindowSize","width","height"],"mappings":";;;;;;;;AAEA,IAAMA,OAAO,SAAPA,KAAQC,GAAA,EAAA;EAAA,OAAA,CAAyBA,OAAO,EAAI,EAAAC,OAAA,CAAQ,8BAA8B,EAAE,CAAA,CAAA;AAAA,CAAA,CAAA;AAE1E,SAAAC,QAAAA,CAASC,IAAaC,GAAa,EAAA;AAC7C,EAAA,IAAA,CAACD,MAAM,CAACC,GAAA,EAAY,OAAA,KAAA,CAAA;AACpB,EAAA,IAAAA,GAAA,CAAIC,OAAQ,CAAA,GAAG,CAAM,KAAA,CAAA,CAAA,EAAU,MAAA,IAAIC,MAAM,qCAAqC,CAAA,CAAA;EAClF,IAAIH,GAAGI,SAAW,EAAA;AACT,IAAA,OAAAJ,EAAA,CAAGI,SAAU,CAAAC,QAAA,CAASJ,GAAG,CAAA,CAAA;AAClC,GAAA;AACA,EAAA,OAAO,IAAAK,MAAA,CAAIN,EAAG,CAAAO,SAAA,EAAaL,GAAAA,CAAAA,CAAAA,OAAQ,CAAAI,GAAAA,CAAAA,MAAA,CAAIL,SAAM,CAAI,GAAA,CAAA,CAAA,CAAA;AACnD,CAAA;AAEa,IAAAO,QAAA,GAAW,SAAXA,QAAAA,CAAqBR,EAAA,EAAaC,GAAa,EAAA;EAC1D,IAAI,CAACD,EAAA,EAAI,OAAA;AACT,EAAA,IAAIS,WAAWT,EAAG,CAAAO,SAAA,CAAA;EAClB,IAAMG,OAAW,GAAA,CAAAT,GAAA,IAAO,EAAI,EAAAU,KAAA,CAAM,GAAG,CAAA,CAAA;AAErC,EAAA,KAAA,IAASC,IAAI,CAAG,EAAAC,CAAA,GAAIH,QAAQI,MAAQ,EAAAF,CAAA,GAAIC,GAAGD,CAAK,EAAA,EAAA;AAC9C,IAAA,IAAMG,UAAUL,OAAQ,CAAAE,CAAA,CAAA,CAAA;IACxB,IAAI,CAACG,OAAA,EAAS,SAAA;IAEd,IAAIf,GAAGI,SAAW,EAAA;AACbJ,MAAAA,EAAA,CAAAI,SAAA,CAAUY,IAAID,OAAO,CAAA,CAAA;KACf,MAAA,IAAA,CAAChB,QAAS,CAAAC,EAAA,EAAIe,OAAO,CAAG,EAAA;AACjCN,MAAAA,QAAA,IAAAH,GAAAA,CAAAA,MAAA,CAAgBS,OAAA,CAAA,CAAA;AAClB,KAAA;AACF,GAAA;AACI,EAAA,IAAA,CAACf,GAAGI,SAAW,EAAA;IAEjBJ,EAAA,CAAGO,SAAY,GAAAE,QAAA,CAAA;AACjB,GAAA;AACF,EAAA;AAEa,IAAAQ,WAAA,GAAc,SAAdA,WAAAA,CAAwBjB,EAAA,EAAaC,GAAa,EAAA;AACzD,EAAA,IAAA,CAACD,MAAM,CAACC,GAAA,EAAK,OAAA;AACX,EAAA,IAAAS,OAAA,GAAUT,GAAI,CAAAU,KAAA,CAAM,GAAG,CAAA,CAAA;AACzB,EAAA,IAAAF,QAAA,GAAAH,GAAAA,CAAAA,MAAA,CAAeN,EAAG,CAAAO,SAAA,EAAA,GAAA,CAAA,CAAA;AAEtB,EAAA,KAAA,IAASK,IAAI,CAAG,EAAAC,CAAA,GAAIH,QAAQI,MAAQ,EAAAF,CAAA,GAAIC,GAAGD,CAAK,EAAA,EAAA;AAC9C,IAAA,IAAMG,UAAUL,OAAQ,CAAAE,CAAA,CAAA,CAAA;IACxB,IAAI,CAACG,OAAA,EAAS,SAAA;IAEd,IAAIf,GAAGI,SAAW,EAAA;AACbJ,MAAAA,EAAA,CAAAI,SAAA,CAAUc,OAAOH,OAAO,CAAA,CAAA;KAClB,MAAA,IAAAhB,QAAA,CAASC,EAAI,EAAAe,OAAO,CAAG,EAAA;MAChCN,QAAA,GAAWA,QAAS,CAAAX,OAAA,CAAA,GAAA,CAAAQ,MAAA,CAAYS,OAAA,EAAY,GAAA,CAAA,EAAA,GAAG,CAAA,CAAA;AACjD,KAAA;AACF,GAAA;AACI,EAAA,IAAA,CAACf,GAAGI,SAAW,EAAA;AAEdJ,IAAAA,EAAA,CAAAO,SAAA,GAAYX,KAAKa,QAAQ,CAAA,CAAA;AAC9B,GAAA;AACF,EAAA;AAGa,IAAAU,eAAA,GAAkB,SAAlBA,eAAAA,CAAmBC,IAAA,EAAcC,OAA0B,EAAA;EACtE,IAAI,CAACC,cAAA,EAAgB,OAAA;AAEf,EAAA,IAAAtB,EAAA,GAAKqB,WAAWE,QAAS,CAAAC,eAAA,CAAA;EAC/B,OAAOC,gBAAiB,CAAAzB,EAAE,CAAE,CAAA0B,gBAAA,CAAiBN,IAAI,CAAA,CAAA;AACnD;;ICzDaE,cAAA,GAAiB,CAAC,EAAE,OAAOK,WAAW,WAAe,IAAAA,MAAA,CAAOJ,QAAY,IAAAI,MAAA,CAAOJ,QAAS,CAAAK,aAAA,EAAA;IASxFC,QAAA,GAAW,SAAXA,QAAAA,CAAYC,GAAA,EAAA;EAAA,OAAgCA,GAAQ,KAAAH,MAAA,CAAA;AAAA,EAAA;IAEpDI,SAAA,GAAY,SAAZA,SAAAA,CAAaC,IAA2B,EAAA;EACnD,IAAMC,UAAa,GAAA,OAAOD,IAAS,KAAA,UAAA,GAAaA,MAAS,GAAAA,IAAA,CAAA;EACzD,IAAI,CAACC,UAAY,EAAA;IACf,OAAOV,QAAS,CAAAW,IAAA,CAAA;AAClB,GAAA;AACI,EAAA,IAAAC,QAAA,CAASF,UAAU,CAAG,EAAA;AACjB,IAAA,OAAAV,QAAA,CAASa,cAAcH,UAAU,CAAA,CAAA;AAC1C,GAAA;EACA,IAAIA,sBAAsBI,WAAa,EAAA;AAC9B,IAAA,OAAAJ,UAAA,CAAA;AACT,GAAA;EACA,OAAOV,QAAS,CAAAW,IAAA,CAAA;AAClB,EAAA;AASgB,SAAAI,iBAAAA,CAAkBC,KAAkBC,MAA+B,EAAA;AAC3E,EAAA,IAAAC,IAAA,GAAOF,IAAIG,qBAAsB,EAAA,CAAA;AACvC,EAAA,IAAIF,MAAQ,EAAA;AACJ,IAAA,IAAAG,UAAA,GAAaH,OAAOE,qBAAsB,EAAA,CAAA;AAChD,IAAA,OACED,IAAK,CAAAG,GAAA,IAAOD,UAAW,CAAAC,GAAA,IACvBH,KAAKI,IAAQ,IAAAF,UAAA,CAAWE,IACxB,IAAAJ,IAAA,CAAKK,MAAU,IAAAH,UAAA,CAAWG,MAC1B,IAAAL,IAAA,CAAKM,SAASJ,UAAW,CAAAI,KAAA,CAAA;AAE7B,GAAA;AACA,EAAA,OAAON,IAAK,CAAAG,GAAA,IAAO,CAAK,IAAAH,IAAA,CAAKI,IAAQ,IAAA,CAAA,IAAKJ,IAAK,CAAAK,MAAA,GAAS,EAAM,IAAAnB,MAAA,CAAOqB,WAAe,IAAAP,IAAA,CAAKM,SAASpB,MAAO,CAAAsB,UAAA,CAAA;AAC3G,CAAA;AAOO,SAASC,QAAQ7B,OAA+B,EAAA;AACrD,EAAA,IAAM8B,IAAI9B,OAAQ,CAAA+B,UAAA,CAAA;EAElB,IAAI,CAACD,CAAA,IAAKA,CAAE,CAAAE,QAAA,KAAa,MAAQ,EAAA;AACxB,IAAA,OAAA,KAAA,CAAA;AACT,GAAA;EAEA,IAAIlC,eAAgB,CAAA,UAAA,EAAYE,OAAO,CAAA,KAAM,OAAS,EAAA;AAC7C,IAAA,OAAA,IAAA,CAAA;AACT,GAAA;EAEA,OAAO6B,QAAQC,CAAC,CAAA,CAAA;AAClB,CAAA;AAMO,SAASG,aAAmDA,GAAA;AACjE,EAAA,IAAIhC,cAAgB,EAAA;IAClB,OAAO;MAAEiC,KAAO,EAAA5B,MAAA,CAAOsB,UAAY;MAAAO,MAAA,EAAQ7B,OAAOqB,WAAAA;KAAY,CAAA;AAChE,GAAA;EACA,OAAO;AAAEO,IAAAA,KAAA,EAAO,CAAG;AAAAC,IAAAA,MAAA,EAAQ,CAAA;GAAE,CAAA;AAC/B;;;;"}
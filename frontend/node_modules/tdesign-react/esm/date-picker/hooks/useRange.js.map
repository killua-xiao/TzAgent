{"version":3,"file":"useRange.js","sources":["../../../../components/date-picker/hooks/useRange.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { CalendarIcon as TdCalendarIcon } from 'tdesign-icons-react';\nimport classNames from 'classnames';\nimport { isValidDate, formatDate, getDefaultFormat, parseToDayjs } from '@tdesign/common-js/date-picker/format';\nimport useConfig from '../../hooks/useConfig';\nimport useGlobalIcon from '../../hooks/useGlobalIcon';\nimport { RangeInputRefInterface } from '../../range-input';\nimport { TdDateRangePickerProps, DateValue } from '../type';\nimport useRangeValue from './useRangeValue';\nimport type { TdPopupProps } from '../../popup/type';\n\nexport const PARTIAL_MAP = { first: 'start', second: 'end' };\n\nexport default function useRange(props: TdDateRangePickerProps) {\n  const { classPrefix, datePicker: globalDatePickerConfig } = useConfig();\n  const { CalendarIcon } = useGlobalIcon({ CalendarIcon: TdCalendarIcon });\n  const name = `${classPrefix}-date-range-picker`;\n\n  const isMountedRef = useRef(false);\n  const inputRef = useRef<RangeInputRefInterface>(null);\n\n  const {\n    value,\n    onChange,\n    time,\n    setTime,\n    month,\n    setMonth,\n    year,\n    setYear,\n    cacheValue,\n    setCacheValue,\n    isFirstValueSelected,\n    setIsFirstValueSelected,\n  } = useRangeValue(props);\n\n  const { format, timeFormat, valueType } = getDefaultFormat({\n    mode: props.mode,\n    format: props.format,\n    valueType: props.valueType,\n    enableTimePicker: props.enableTimePicker,\n  });\n\n  const [popupVisible, setPopupVisible] = useState(false);\n  const [isHoverCell, setIsHoverCell] = useState(false);\n  const [activeIndex, setActiveIndex] = useState(0); // 确定当前选中的输入框序号\n  // 未真正选中前可能不断变更输入框的内容\n  const [inputValue, setInputValue] = useState(() => formatDate(value, { format }));\n\n  const handlePopupInvisible = () => {\n    setPopupVisible(false);\n    props.popupProps?.onVisibleChange?.(false, {});\n  };\n\n  // input 设置\n  const rangeInputProps = {\n    ...props.rangeInputProps,\n    ref: inputRef,\n    borderless: props.borderless,\n    size: props.size,\n    separator: props.separator ?? globalDatePickerConfig.rangeSeparator,\n    clearable: props.clearable,\n    prefixIcon: props.prefixIcon,\n    readonly: !props.allowInput,\n    placeholder: props.placeholder ?? globalDatePickerConfig.placeholder[props.mode],\n    activeIndex: popupVisible ? activeIndex : undefined,\n    suffixIcon: props.suffixIcon ?? <CalendarIcon />,\n    label: props.label,\n    className: classNames({\n      [`${name}__input--placeholder`]: isHoverCell,\n    }),\n    onClick: ({ position }) => {\n      setActiveIndex(position === 'first' ? 0 : 1);\n    },\n    onClear: ({ e }) => {\n      e.stopPropagation();\n      handlePopupInvisible();\n      onChange([], { dayjsValue: [], trigger: 'clear' });\n      props.onClear?.({ e });\n    },\n    onBlur: (newVal: string[], { e, position }) => {\n      props.onBlur?.({ value: newVal, partial: PARTIAL_MAP[position], e });\n    },\n    onFocus: (newVal: string[], { e, position }) => {\n      props.onFocus?.({ value: newVal, partial: PARTIAL_MAP[position], e });\n      setActiveIndex(position === 'first' ? 0 : 1);\n    },\n    onChange: (newVal: string[], { e, position }) => {\n      const index = position === 'first' ? 0 : 1;\n\n      props.onInput?.({ input: newVal[index], value, partial: PARTIAL_MAP[position], e });\n      setInputValue(newVal);\n\n      // 跳过不符合格式化的输入框内容\n      if (!isValidDate(newVal, format)) return;\n      setCacheValue(newVal);\n      const newYear = [];\n      const newMonth = [];\n      const newTime = [];\n      newVal.forEach((v) => {\n        newYear.push(parseToDayjs(v, format).year());\n        newMonth.push(parseToDayjs(v, format).month());\n        newTime.push(parseToDayjs(v, format).format(timeFormat));\n      });\n      setYear(newYear);\n      setMonth(newMonth);\n      setTime(newTime);\n    },\n    onEnter: (newVal: string[]) => {\n      if (!isValidDate(newVal, format) && !isValidDate(value, format)) return;\n\n      handlePopupInvisible();\n      if (isValidDate(newVal, format)) {\n        onChange(formatDate(newVal, { format, targetFormat: valueType, autoSwap: true }) as DateValue[], {\n          dayjsValue: newVal.map((v) => parseToDayjs(v, format)),\n          trigger: 'enter',\n        });\n      } else if (isValidDate(value, format)) {\n        setInputValue(formatDate(value, { format }));\n      } else {\n        setInputValue([]);\n      }\n    },\n  };\n\n  // popup 设置\n  const popupProps = {\n    expandAnimation: true,\n    ...props.popupProps,\n    trigger: 'mousedown' as TdPopupProps['trigger'],\n    overlayInnerStyle: props.popupProps?.overlayInnerStyle ?? { width: 'auto' },\n    overlayClassName: classNames(props.popupProps?.overlayClassName, `${name}__panel-container`),\n    onVisibleChange: (visible: boolean, context) => {\n      if (props.disabled) return;\n      // 这里劫持了进一步向 popup 传递的 onVisibleChange 事件，为了保证可以在 Datepicker 中使用 popupProps.onVisibleChange，故此处理\n      props.popupProps?.onVisibleChange?.(visible, context);\n      // 输入框点击不关闭面板\n      if (context.trigger === 'trigger-element-mousedown') {\n        const indexMap = { 0: 'first', 1: 'second' };\n        inputRef.current.focus({ position: indexMap[activeIndex] });\n        return setPopupVisible(true);\n      }\n\n      setPopupVisible(visible);\n    },\n  };\n\n  // 输入框响应 value 变化\n  useEffect(() => {\n    if (!value) {\n      setInputValue([]);\n      return;\n    }\n    if (!isValidDate(value, format)) return;\n\n    setInputValue(formatDate(value, { format }));\n    // eslint-disable-next-line\n  }, [value]);\n\n  // activeIndex 变化自动 focus 对应输入框\n  useEffect(() => {\n    if (!popupVisible) return;\n    if (!isMountedRef.current) {\n      isMountedRef.current = true;\n      return;\n    }\n    const indexMap = { 0: 'first', 1: 'second' };\n    inputRef.current.focus({ position: indexMap[activeIndex] });\n    // eslint-disable-next-line\n  }, [activeIndex]);\n\n  return {\n    year,\n    month,\n    value,\n    time,\n    inputValue,\n    popupVisible,\n    rangeInputProps,\n    popupProps,\n    isHoverCell,\n    onChange,\n    setYear,\n    setMonth,\n    setTime,\n    setIsHoverCell,\n    setInputValue,\n    setPopupVisible,\n    activeIndex,\n    setActiveIndex,\n    isFirstValueSelected,\n    setIsFirstValueSelected,\n    cacheValue,\n    setCacheValue,\n  };\n}\n"],"names":["PARTIAL_MAP","first","second","useRange","props","_props$separator","_props$placeholder","_props$suffixIcon","_props$popupProps$ove","_props$popupProps2","_props$popupProps3","_useConfig","useConfig","classPrefix","globalDatePickerConfig","datePicker","_useGlobalIcon","useGlobalIcon","CalendarIcon","TdCalendarIcon","name","isMountedRef","useRef","inputRef","_useRangeValue","useRangeValue","value","onChange","time","setTime","month","setMonth","year","setYear","cacheValue","setCacheValue","isFirstValueSelected","setIsFirstValueSelected","_getDefaultFormat","getDefaultFormat","mode","format","valueType","enableTimePicker","timeFormat","_useState","useState","_useState2","_slicedToArray","popupVisible","setPopupVisible","_useState3","_useState4","isHoverCell","setIsHoverCell","_useState5","_useState6","activeIndex","setActiveIndex","_useState7","formatDate","_useState8","inputValue","setInputValue","handlePopupInvisible","_props$popupProps","_props$popupProps$onV","popupProps","onVisibleChange","call","rangeInputProps","_objectSpread","ref","borderless","size","separator","rangeSeparator","clearable","prefixIcon","readonly","allowInput","placeholder","suffixIcon","React","createElement","label","className","classNames","_defineProperty","concat","onClick","_ref","position","onClear","_ref2","_props$onClear","e","stopPropagation","dayjsValue","trigger","onBlur","newVal","_ref3","_props$onBlur","partial","onFocus","_ref4","_props$onFocus","_ref5","_props$onInput","index","onInput","input","isValidDate","newYear","newMonth","newTime","forEach","v","push","parseToDayjs","onEnter","targetFormat","autoSwap","map","expandAnimation","overlayInnerStyle","width","overlayClassName","visible","context","_props$popupProps4","_props$popupProps4$on","disabled","indexMap","current","focus","useEffect"],"mappings":"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"}
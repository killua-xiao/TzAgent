{"version":3,"file":"Cell.js","sources":["../../../../components/date-picker/base/Cell.tsx"],"sourcesContent":["import React from 'react';\nimport classNames from 'classnames';\nimport { extractTimeObj } from '@tdesign/common-js/date-picker/utils';\nimport useConfig from '../../hooks/useConfig';\n\nexport interface DatePickerCellProps {\n  time?: string;\n  text: [string, number];\n  value: Date;\n  active: boolean;\n  highlight: boolean;\n  disabled: boolean;\n  startOfRange: boolean;\n  endOfRange: boolean;\n  hoverHighlight: boolean;\n  hoverStartOfRange: boolean;\n  hoverEndOfRange: boolean;\n  additional: boolean;\n  weekOfYear: boolean;\n  now: boolean;\n  firstDayOfMonth: boolean;\n  lastDayOfMonth: boolean;\n  onClick: Function;\n  onMouseEnter: Function;\n}\n\nconst DatePickerCell = (props: DatePickerCellProps) => {\n  const { classPrefix } = useConfig();\n\n  const cellClass = classNames(`${classPrefix}-date-picker__cell`, {\n    [`${classPrefix}-date-picker__cell--now`]: props.now,\n    [`${classPrefix}-date-picker__cell--active`]: props.active,\n    [`${classPrefix}-date-picker__cell--disabled`]: props.disabled,\n    [`${classPrefix}-date-picker__cell--highlight`]: props.highlight,\n    [`${classPrefix}-date-picker__cell--hover-highlight`]: props.hoverHighlight,\n    [`${classPrefix}-date-picker__cell--active-start`]: props.startOfRange,\n    [`${classPrefix}-date-picker__cell--active-end`]: props.endOfRange,\n    [`${classPrefix}-date-picker__cell--hover-start`]: props.hoverStartOfRange,\n    [`${classPrefix}-date-picker__cell--hover-end`]: props.hoverEndOfRange,\n    [`${classPrefix}-date-picker__cell--additional`]: props.additional,\n    [`${classPrefix}-date-picker__cell--first-day-of-month`]: props.firstDayOfMonth,\n    [`${classPrefix}-date-picker__cell--last-day-of-month`]: props.lastDayOfMonth,\n    [`${classPrefix}-date-picker__cell--week-of-year`]: props.weekOfYear,\n  });\n\n  function handleClick(e: React.MouseEvent) {\n    if (props.disabled) return;\n    if (props.time) {\n      const { hours, minutes, seconds, milliseconds, meridiem } = extractTimeObj(props.time);\n      // am pm 12小时制转化 24小时制\n      let nextHours = hours;\n      if (/am/i.test(meridiem) && nextHours === 12) nextHours -= 12;\n      if (/pm/i.test(meridiem) && nextHours < 12) nextHours += 12;\n      props.value.setHours(nextHours);\n      props.value.setMinutes(minutes);\n      props.value.setSeconds(seconds);\n      props.value.setMilliseconds(milliseconds);\n    }\n    props.onClick?.(props.value, { e });\n  }\n\n  function handleMouseEnter() {\n    if (props.disabled) return;\n    if (props.time) {\n      const { hours, minutes, seconds, milliseconds, meridiem } = extractTimeObj(props.time);\n      // am pm 12小时制转化 24小时制\n      let nextHours = hours;\n      if (/am/i.test(meridiem) && nextHours === 12) nextHours -= 12;\n      if (/pm/i.test(meridiem) && nextHours < 12) nextHours += 12;\n      props.value.setHours(nextHours);\n      props.value.setMinutes(minutes);\n      props.value.setSeconds(seconds);\n      props.value.setMilliseconds(milliseconds);\n    }\n    props.onMouseEnter?.(props.value);\n  }\n\n  return (\n    <td className={cellClass} onClick={handleClick} onMouseEnter={handleMouseEnter}>\n      <div className={`${classPrefix}-date-picker__cell-inner`}>{props.text}</div>\n    </td>\n  );\n};\n\nDatePickerCell.displayName = 'DatePickerCell';\n\nexport default DatePickerCell;\n"],"names":["DatePickerCell","props","_classNames","_useConfig","useConfig","classPrefix","cellClass","classNames","concat","_defineProperty","now","active","disabled","highlight","hoverHighlight","startOfRange","endOfRange","hoverStartOfRange","hoverEndOfRange","additional","firstDayOfMonth","lastDayOfMonth","weekOfYear","handleClick","e","_props$onClick","time","_extractTimeObj","extractTimeObj","hours","minutes","seconds","milliseconds","meridiem","nextHours","test","value","setHours","setMinutes","setSeconds","setMilliseconds","onClick","call","handleMouseEnter","_props$onMouseEnter","_extractTimeObj2","onMouseEnter","React","createElement","className","text","displayName"],"mappings":"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"}
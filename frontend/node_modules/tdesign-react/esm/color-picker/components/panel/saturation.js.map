{"version":3,"file":"saturation.js","sources":["../../../../../components/color-picker/components/panel/saturation.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useRef } from 'react';\nimport {\n  SATURATION_PANEL_DEFAULT_HEIGHT,\n  SATURATION_PANEL_DEFAULT_WIDTH,\n} from '@tdesign/common-js/color-picker/constants';\nimport useMouseEvent, { type MouseCoordinate } from '../../../hooks/useMouseEvent';\nimport type { TdColorBaseProps } from '../../interface';\n\nconst Saturation = (props: TdColorBaseProps) => {\n  const { color, disabled, onChange, baseClassName } = props;\n  const panelRef = useRef<HTMLDivElement>(null);\n  const panelRectRef = useRef({\n    width: SATURATION_PANEL_DEFAULT_WIDTH,\n    height: SATURATION_PANEL_DEFAULT_HEIGHT,\n  });\n\n  const styles = () => {\n    const { saturation, value, rgb } = color;\n    const { width, height } = panelRectRef.current;\n    const top = Math.round((1 - value) * height);\n    const left = Math.round(saturation * width);\n    return {\n      color: rgb,\n      left: `${left}px`,\n      top: `${top}px`,\n    };\n  };\n\n  const getSaturationAndValue = (coordinate: MouseCoordinate) => {\n    const { width, height } = panelRectRef.current;\n    const { x, y } = coordinate;\n    const saturation = Math.round((x / width) * 100);\n    const value = Math.round((1 - y / height) * 100);\n    return {\n      saturation,\n      value,\n    };\n  };\n\n  const handleDrag = useCallback(\n    ({ x, y }: MouseCoordinate) => {\n      if (disabled) return;\n      const { saturation, value } = getSaturationAndValue({ x, y });\n      onChange({\n        saturation: saturation / 100,\n        value: value / 100,\n      });\n    },\n    [disabled, onChange],\n  );\n\n  useMouseEvent(panelRef, {\n    onDown: () => {\n      if (disabled) return;\n      panelRectRef.current.width = panelRef.current.offsetWidth;\n      panelRectRef.current.height = panelRef.current.offsetHeight;\n    },\n    onMove: (_, ctx) => {\n      handleDrag(ctx.coordinate);\n    },\n    onUp: (_, ctx) => {\n      handleDrag(ctx.coordinate);\n    },\n  });\n\n  useEffect(() => {\n    panelRectRef.current.width = panelRef.current?.offsetWidth || SATURATION_PANEL_DEFAULT_WIDTH;\n    panelRectRef.current.height = panelRef.current?.offsetHeight || SATURATION_PANEL_DEFAULT_HEIGHT;\n  }, [handleDrag]);\n\n  return (\n    <div\n      ref={panelRef}\n      className={`${baseClassName}__saturation`}\n      style={{\n        background: `hsl(${color.hue}, 100%, 50%)`,\n      }}\n    >\n      <span className={`${baseClassName}__thumb`} role=\"slider\" tabIndex={0} style={styles()}></span>\n    </div>\n  );\n};\n\nexport default React.memo(Saturation);\n"],"names":["Saturation","props","color","disabled","onChange","baseClassName","panelRef","useRef","panelRectRef","width","SATURATION_PANEL_DEFAULT_WIDTH","height","SATURATION_PANEL_DEFAULT_HEIGHT","styles","saturation","value","rgb","_panelRectRef$current","current","top","Math","round","left","getSaturationAndValue","coordinate","_panelRectRef$current2","x","y","handleDrag","useCallback","_ref","_getSaturationAndValu","useMouseEvent","onDown","offsetWidth","offsetHeight","onMove","_","ctx","onUp","useEffect","_panelRef$current","_panelRef$current2","React","createElement","ref","className","style","background","concat","hue","role","tabIndex","memo"],"mappings":"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"}
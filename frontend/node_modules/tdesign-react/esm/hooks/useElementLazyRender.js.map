{"version":3,"file":"useElementLazyRender.js","sources":["../../../components/hooks/useElementLazyRender.ts"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport observe from '@tdesign/common-js/utils/observe';\n\nexport function useElementLazyRender(labelRef: React.RefObject<HTMLElement>, lazyLoad: boolean) {\n  const ioObserver = useRef<IntersectionObserver>(null);\n  const [showElement, setShowElement] = useState(!lazyLoad);\n\n  const handleLazyLoad = () => {\n    if (!lazyLoad || !labelRef.current || ioObserver.current) return;\n    setShowElement(false);\n    const io = observe(\n      labelRef.current,\n      null,\n      () => {\n        setShowElement(true);\n      },\n      10,\n    );\n    ioObserver.current = io;\n\n    return () => {\n      if (!lazyLoad || !labelRef.current) return;\n      // eslint-disable-next-line\n      ioObserver.current?.unobserve(labelRef.current);\n      ioObserver.current = null;\n    };\n  };\n\n  useEffect(handleLazyLoad, [lazyLoad, labelRef]);\n\n  return {\n    showElement,\n  };\n}\n\nexport default useElementLazyRender;\n"],"names":["useElementLazyRender","labelRef","lazyLoad","ioObserver","useRef","_useState","useState","_useState2","_slicedToArray","showElement","setShowElement","handleLazyLoad","current","io","observe","_ioObserver$current","unobserve","useEffect"],"mappings":";;;;;;;;;;;AAGgB,SAAAA,oBAAAA,CAAqBC,UAAwCC,QAAmB,EAAA;AACxF,EAAA,IAAAC,UAAA,GAAaC,OAA6B,IAAI,CAAA,CAAA;AACpD,EAAA,IAAAC,SAAA,GAAsCC,QAAA,CAAS,CAACJ,QAAQ,CAAA;IAAAK,UAAA,GAAAC,cAAA,CAAAH,SAAA,EAAA,CAAA,CAAA;AAAjDI,IAAAA,WAAa,GAAAF,UAAA,CAAA,CAAA,CAAA;AAAAG,IAAAA,cAAc,GAAAH,UAAA,CAAA,CAAA,CAAA,CAAA;AAElC,EAAA,IAAMI,iBAAiB,SAAjBA,iBAAuB;IAC3B,IAAI,CAACT,QAAA,IAAY,CAACD,QAAA,CAASW,WAAWT,UAAW,CAAAS,OAAA,EAAS,OAAA;IAC1DF,cAAA,CAAe,KAAK,CAAA,CAAA;IACpB,IAAMG,EAAK,GAAAC,OAAA,CACTb,QAAS,CAAAW,OAAA,EACT,IAAA,EACA,YAAM;MACJF,cAAA,CAAe,IAAI,CAAA,CAAA;KACrB,EACA,EACF,CAAA,CAAA;IACAP,UAAA,CAAWS,OAAU,GAAAC,EAAA,CAAA;AAErB,IAAA,OAAO,YAAM;AAAA,MAAA,IAAAE,mBAAA,CAAA;AACP,MAAA,IAAA,CAACb,QAAY,IAAA,CAACD,QAAS,CAAAW,OAAA,EAAS,OAAA;AAEzB,MAAA,CAAAG,mBAAA,GAAAZ,UAAA,CAAAS,OAAA,MAAAG,IAAAA,IAAAA,mBAAA,KAAAA,KAAAA,CAAAA,IAAAA,mBAAA,CAASC,SAAU,CAAAf,QAAA,CAASW,OAAO,CAAA,CAAA;MAC9CT,UAAA,CAAWS,OAAU,GAAA,IAAA,CAAA;KACvB,CAAA;GACF,CAAA;EAEAK,SAAA,CAAUN,cAAgB,EAAA,CAACT,QAAU,EAAAD,QAAQ,CAAC,CAAA,CAAA;EAEvC,OAAA;AACLQ,IAAAA,WAAA,EAAAA,WAAAA;GACF,CAAA;AACF;;;;"}